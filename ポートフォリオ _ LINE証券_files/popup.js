(function(){var Wo=document.createElement("style");Wo.textContent=`.krkr-chat{bottom:16px;box-shadow:2px 2px 8px rgba(0,0,0,.5);display:flex;flex-direction:column;height:540px;position:fixed;right:16px;width:360px;z-index:99999}@media (max-height:540px),(max-width:480px){.krkr-chat{bottom:0!important;height:auto!important;left:0!important;right:0!important;top:0!important;width:auto!important}}.krkr-chat__head{align-items:center;background:#eee;box-sizing:border-box;display:flex;height:32px;justify-content:flex-end;padding:8px}.krkr-chat__body{border:none;display:block;flex:1;margin:0;padding:0;width:100%}.krkr-modern-chat{bottom:16px;box-shadow:0 10px 40px rgba(0,0,0,.1);display:flex;flex-direction:column;height:667px;position:fixed;right:16px;width:376px;z-index:99999}@media (max-height:667px),(max-width:480px){.krkr-modern-chat{bottom:0!important;height:auto!important;left:0!important;right:0!important;top:0!important;width:auto!important}}@media (min-width:668px){.krkr-modern-chat{border-radius:12px;overflow:hidden}}.krkr-modern-chat__head{align-items:center;border:1px solid #fff;border-radius:100%;box-sizing:border-box;cursor:pointer;display:flex;height:20px;justify-content:flex-end;padding:4px;position:absolute;right:12px;top:20px;width:20px}.krkr-modern-chat__body{border:none;display:block;flex:1;margin:0;padding:0;width:100%}.krkr-popup-icon-balloon-close-button{align-items:center;background:transparent;border:none;border-radius:50%;cursor:pointer;display:flex;height:24px;justify-content:center;padding:4px;width:24px}.krkr-popup-icon-balloon-close-button>svg{border-radius:50%}.krkr-popup-icon-balloon-close-button--plain>svg{fill:#a2aeba;background-color:#fff}.krkr-popup-icon-balloon-close-button--gray>svg{fill:#fff;background-color:#a2aeba}.krkr-popup-icon-balloon-message{-webkit-box-orient:vertical;-webkit-line-clamp:3;display:-webkit-box;font-size:16px;margin:0;overflow:hidden;padding:0}.krkr-popup-icon-balloon-message.krkr-popup-icon-balloon-message--long{font-size:15px}.krkr-popup-icon-balloon-message.krkr-popup-icon-balloon-message--xl-long{font-size:14px}@media (max-width:600px){.krkr-popup-icon-balloon-message{font-size:14px}.krkr-popup-icon-balloon-message.krkr-popup-icon-balloon-message--long{font-size:13px}.krkr-popup-icon-balloon-message.krkr-popup-icon-balloon-message--xl-long{font-size:12px}}.krkr-button.krkr-popup-icon-button{align-items:center;border-radius:100%;box-sizing:border-box;cursor:pointer;display:flex;height:60px;justify-content:center;position:static;width:60px}@media (max-width:600px){.krkr-button.krkr-popup-icon-button{height:50px;width:50px}}.krkr-button.krkr-popup-icon-button:hover{opacity:.8}.krkr-button.krkr-popup-icon-button:active{opacity:.6}.krkr-button.krkr-popup-icon-button--default{background-image:linear-gradient(180deg,transparent,rgba(0,0,0,.12))}.krkr-button.krkr-popup-icon-button--alt{border:1px solid}.krkr-button.krkr-popup-icon-button--shadow{box-shadow:2px 2px 4px 1px rgba(0,0,0,.2)}.krkr-button.krkr-popup-icon-button--draggable:hover{cursor:grab}.krkr-button.krkr-popup-icon-button--draggable:active{cursor:grabbing}.krkr-button .krkr-popup-icon-button__close-button{position:absolute;right:-5px;top:-5px;z-index:2}.krkr-button-img.krkr-popup-icon-button-image{border:none;box-sizing:border-box;cursor:pointer;position:static}.krkr-button-img.krkr-popup-icon-button-image img{display:block;height:auto;width:100%}.krkr-button-img.krkr-popup-icon-button-image:hover{opacity:.8}.krkr-button-img.krkr-popup-icon-button-image:active{opacity:.6}.krkr-button-img.krkr-popup-icon-button-image--circle{border-radius:100%}.krkr-button-img.krkr-popup-icon-button-image--circle img{border-radius:50%;overflow:hidden}.krkr-button-img.krkr-popup-icon-button-image--draggable:hover{cursor:grab}.krkr-button-img.krkr-popup-icon-button-image--draggable:active{cursor:grabbing}.krkr-button-img .krkr-popup-icon-button-image__close-button{position:absolute;right:-5px;top:-5px;z-index:2}.krkr-popup-icon-close-button{align-items:center;border:none;border-radius:50%;box-shadow:0 4px 12px rgba(0,0,0,.15);cursor:pointer;display:flex;height:24px;justify-content:center;padding:0;width:24px}.krkr-popup-icon-close-button--plain{fill:#a2aeba;background-color:#fff}.krkr-popup-icon-close-button--gray{fill:#fff;background-color:#a2aeba}.krkr-popup-icon-wrapper{position:fixed;z-index:99999}.krkr-popup-message-button__dialog{background-color:#fff;border-radius:8px;box-shadow:0 10px 40px rgba(0,0,0,.1);box-sizing:border-box;display:flex;flex-direction:column;height:100%;padding:30px;width:100%}.krkr-popup-message-button__title-text{font-size:20px;font-weight:700;line-height:27px}.krkr-popup-message-button__content{padding:16px 0}.krkr-popup-message-button__content-text{display:inline-block;font-size:13px;font-weight:400;line-height:18px;white-space:pre-wrap;word-break:break-all}.krkr-popup-message-button__action-button{background:#242424;border:1px solid #979797;border-radius:3px;cursor:pointer;height:40px;width:100%}.krkr-popup-message-button__action-button-label{align-items:center;color:#fff;display:flex;font-size:14px;font-weight:700;justify-content:center}.krkr-popup-message-button__close{position:absolute;right:10px;top:10px}.krkr-popup-message-close-button{align-items:center;border:none;border-radius:50%;cursor:pointer;display:flex;height:24px;justify-content:center;padding:0;width:24px}.krkr-popup-message-close-button--plain{fill:#a2aeba;background-color:#fff}.krkr-popup-message-close-button--gray{fill:#fff;background-color:#a2aeba}.krkr-popup-message-html__dialog{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.12);box-sizing:border-box;height:100%;width:100%}.krkr-popup-message-html__close{position:absolute;right:10px;top:10px}.krkr-popup-message-image__dialog{background-color:#fff;border-radius:8px;box-shadow:0 2px 8px rgba(0,0,0,.12);box-sizing:border-box;height:100%;overflow:hidden;width:100%}.krkr-popup-message-image__dialog--clickable{cursor:pointer}.krkr-popup-message-image__content-image{display:block;width:100%}.krkr-popup-message-image__close{position:absolute;right:10px;top:10px}.krkr-popup-message-text__dialog{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.12);box-sizing:border-box;height:100%;padding:30px;width:100%}.krkr-popup-message-text__dialog--clickable{cursor:pointer}.krkr-popup-message-text__content-text{font-size:16px;font-weight:700;line-height:22px;white-space:pre-wrap;word-break:break-all}.krkr-popup-message-text__close{position:absolute;right:10px;top:10px}.krkr-popup-message-wrapper__wrapper{position:fixed;z-index:99999}.krkr-popup-message-wrapper__wrapper--center{left:50%;top:50%;transform:translate(-50%,-50%)}.krkr-popup-message-wrapper__backdrop{background-color:rgba(0,0,0,.5);height:100%;left:0;position:fixed;top:0;width:100%;z-index:99998}.krkr-popup-v2__icon{transition:all .6s ease;z-index:99998}.krkr-popup-v2__icon--balloon.krkr-popup-v2__icon--left{bottom:10px;left:10px;position:absolute}.krkr-popup-v2__icon--balloon.krkr-popup-v2__icon--right{bottom:10px;position:absolute;right:10px}.krkr-popup-v2__balloon{align-items:center;border:none;border-radius:40px;box-shadow:0 4px 12px rgba(0,0,0,.15);box-sizing:border-box;cursor:pointer;display:flex;height:80px;max-width:min(100vw - 32px,360px);transition:all .6s ease;width:360px}@media (max-width:600px){.krkr-popup-v2__balloon{height:70px;max-width:min(100vw - 32px,320px);width:320px}}.krkr-popup-v2__balloon--left{bottom:0;left:0;padding:16px 48px 16px 80px;position:absolute}.krkr-popup-v2__balloon--right{bottom:0;padding:16px 80px 16px 48px;position:absolute;right:0}.krkr-popup-v2__balloon--draggable:hover{cursor:grab}.krkr-popup-v2__balloon--draggable:active{cursor:grabbing}.krkr-popup-v2__balloon--hide{bottom:10px;height:60px;opacity:0;padding:0;position:absolute;right:10px;visibility:hidden;width:60px}@media (max-width:600px){.krkr-popup-v2__balloon--hide{height:50px;width:50px}}.krkr-popup-v2__balloon-close-button--left{position:absolute;right:12px;top:calc(50% - 12px)}.krkr-popup-v2__balloon-close-button--right{left:12px;position:absolute;top:calc(50% - 12px)}.krkr-active{overflow:visible!important}@media (max-width:600px){.krkr-active>body{height:100%;overflow:hidden;position:fixed;width:100%}}.krkr-iframe{border:none;height:480px;width:100%}
`,document.head.appendChild(Wo);var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vt=function(e){return e&&e.Math===Math&&e},P=vt(typeof globalThis=="object"&&globalThis)||vt(typeof window=="object"&&window)||vt(typeof self=="object"&&self)||vt(typeof Ge=="object"&&Ge)||function(){return this}()||Ge||Function("return this")(),gt={},L=function(e){try{return!!e()}catch(t){return!0}},Yl=L,J=!Yl(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),Xl=L,mt=!Xl(function(){var e=function(){}.bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),Jl=mt,bt=Function.prototype.call,q=Jl?bt.bind(bt):function(){return bt.apply(bt,arguments)},Go={},Ko={}.propertyIsEnumerable,Yo=Object.getOwnPropertyDescriptor,Zl=Yo&&!Ko.call({1:2},1);Go.f=Zl?function(t){var r=Yo(this,t);return!!r&&r.enumerable}:Ko;var Ke=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},Xo=mt,Jo=Function.prototype,$r=Jo.call,Ql=Xo&&Jo.bind.bind($r,$r),N=Xo?Ql:function(e){return function(){return $r.apply(e,arguments)}},Zo=N,eu=Zo({}.toString),tu=Zo("".slice),_t=function(e){return tu(eu(e),8,-1)},ru=N,nu=L,ou=_t,Cr=Object,iu=ru("".split),su=nu(function(){return!Cr("z").propertyIsEnumerable(0)})?function(e){return ou(e)==="String"?iu(e,""):Cr(e)}:Cr,yt=function(e){return e==null},au=yt,cu=TypeError,Sr=function(e){if(au(e))throw new cu("Can't call method on "+e);return e},lu=su,uu=Sr,Ye=function(e){return lu(uu(e))},xr=typeof document=="object"&&document.all,fu=typeof xr>"u"&&xr!==void 0,Qo={all:xr,IS_HTMLDDA:fu},ei=Qo,pu=ei.all,O=ei.IS_HTMLDDA?function(e){return typeof e=="function"||e===pu}:function(e){return typeof e=="function"},ti=O,ri=Qo,du=ri.all,ae=ri.IS_HTMLDDA?function(e){return typeof e=="object"?e!==null:ti(e)||e===du}:function(e){return typeof e=="object"?e!==null:ti(e)},Er=P,hu=O,vu=function(e){return hu(e)?e:void 0},ce=function(e,t){return arguments.length<2?vu(Er[e]):Er[e]&&Er[e][t]},gu=N,wt=gu({}.isPrototypeOf),kt=typeof navigator<"u"&&String(navigator.userAgent)||"",ni=P,Tr=kt,oi=ni.process,ii=ni.Deno,si=oi&&oi.versions||ii&&ii.version,ai=si&&si.v8,G,$t;ai&&(G=ai.split("."),$t=G[0]>0&&G[0]<4?1:+(G[0]+G[1])),!$t&&Tr&&(G=Tr.match(/Edge\/(\d+)/),(!G||G[1]>=74)&&(G=Tr.match(/Chrome\/(\d+)/),G&&($t=+G[1])));var ci=$t,li=ci,mu=L,bu=P,_u=bu.String,ui=!!Object.getOwnPropertySymbols&&!mu(function(){var e=Symbol("symbol detection");return!_u(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&li&&li<41}),yu=ui,fi=yu&&!Symbol.sham&&typeof Symbol.iterator=="symbol",wu=ce,ku=O,$u=wt,Cu=fi,Su=Object,pi=Cu?function(e){return typeof e=="symbol"}:function(e){var t=wu("Symbol");return ku(t)&&$u(t.prototype,Su(e))},xu=String,Ct=function(e){try{return xu(e)}catch(t){return"Object"}},Eu=O,Tu=Ct,Ou=TypeError,Z=function(e){if(Eu(e))return e;throw new Ou(Tu(e)+" is not a function")},Iu=Z,Ru=yt,Or=function(e,t){var r=e[t];return Ru(r)?void 0:Iu(r)},Ir=q,Rr=O,Pr=ae,Pu=TypeError,Au=function(e,t){var r,n;if(t==="string"&&Rr(r=e.toString)&&!Pr(n=Ir(r,e))||Rr(r=e.valueOf)&&!Pr(n=Ir(r,e))||t!=="string"&&Rr(r=e.toString)&&!Pr(n=Ir(r,e)))return n;throw new Pu("Can't convert object to primitive value")},di={exports:{}},hi=P,Mu=Object.defineProperty,Ar=function(e,t){try{Mu(hi,e,{value:t,configurable:!0,writable:!0})}catch(r){hi[e]=t}return t},Nu=P,Bu=Ar,vi="__core-js_shared__",Fu=Nu[vi]||Bu(vi,{}),Mr=Fu,gi=Mr;(di.exports=function(e,t){return gi[e]||(gi[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.33.2",mode:"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.33.2/LICENSE",source:"https://github.com/zloirock/core-js"});var mi=di.exports,Lu=Sr,ju=Object,bi=function(e){return ju(Lu(e))},Du=N,Uu=bi,Vu=Du({}.hasOwnProperty),Q=Object.hasOwn||function(t,r){return Vu(Uu(t),r)},Hu=N,qu=0,Wu=Math.random(),zu=Hu(1 .toString),_i=function(e){return"Symbol("+(e===void 0?"":e)+")_"+zu(++qu+Wu,36)},Gu=P,Ku=mi,yi=Q,Yu=_i,Xu=ui,Ju=fi,Te=Gu.Symbol,Nr=Ku("wks"),Zu=Ju?Te.for||Te:Te&&Te.withoutSetter||Yu,j=function(e){return yi(Nr,e)||(Nr[e]=Xu&&yi(Te,e)?Te[e]:Zu("Symbol."+e)),Nr[e]},Qu=q,wi=ae,ki=pi,ef=Or,tf=Au,rf=j,nf=TypeError,of=rf("toPrimitive"),sf=function(e,t){if(!wi(e)||ki(e))return e;var r=ef(e,of),n;if(r){if(t===void 0&&(t="default"),n=Qu(r,e,t),!wi(n)||ki(n))return n;throw new nf("Can't convert object to primitive value")}return t===void 0&&(t="number"),tf(e,t)},af=sf,cf=pi,$i=function(e){var t=af(e,"string");return cf(t)?t:t+""},lf=P,Ci=ae,Br=lf.document,uf=Ci(Br)&&Ci(Br.createElement),Fr=function(e){return uf?Br.createElement(e):{}},ff=J,pf=L,df=Fr,Si=!ff&&!pf(function(){return Object.defineProperty(df("div"),"a",{get:function(){return 7}}).a!==7}),hf=J,vf=q,gf=Go,mf=Ke,bf=Ye,_f=$i,yf=Q,wf=Si,xi=Object.getOwnPropertyDescriptor;gt.f=hf?xi:function(t,r){if(t=bf(t),r=_f(r),wf)try{return xi(t,r)}catch(n){}if(yf(t,r))return mf(!vf(gf.f,t,r),t[r])};var le={},kf=J,$f=L,Ei=kf&&$f(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),Cf=ae,Sf=String,xf=TypeError,ee=function(e){if(Cf(e))return e;throw new xf(Sf(e)+" is not an object")},Ef=J,Tf=Si,Of=Ei,St=ee,Ti=$i,If=TypeError,Lr=Object.defineProperty,Rf=Object.getOwnPropertyDescriptor,jr="enumerable",Dr="configurable",Ur="writable";le.f=Ef?Of?function(t,r,n){if(St(t),r=Ti(r),St(n),typeof t=="function"&&r==="prototype"&&"value"in n&&Ur in n&&!n[Ur]){var o=Rf(t,r);o&&o[Ur]&&(t[r]=n.value,n={configurable:Dr in n?n[Dr]:o[Dr],enumerable:jr in n?n[jr]:o[jr],writable:!1})}return Lr(t,r,n)}:Lr:function(t,r,n){if(St(t),r=Ti(r),St(n),Tf)try{return Lr(t,r,n)}catch(o){}if("get"in n||"set"in n)throw new If("Accessors not supported");return"value"in n&&(t[r]=n.value),t};var Pf=J,Af=le,Mf=Ke,Oe=Pf?function(e,t,r){return Af.f(e,t,Mf(1,r))}:function(e,t,r){return e[t]=r,e},Oi={exports:{}},Vr=J,Nf=Q,Ii=Function.prototype,Bf=Vr&&Object.getOwnPropertyDescriptor,Hr=Nf(Ii,"name"),Ff=Hr&&function(){}.name==="something",Lf=Hr&&(!Vr||Vr&&Bf(Ii,"name").configurable),Ri={EXISTS:Hr,PROPER:Ff,CONFIGURABLE:Lf},jf=N,Df=O,qr=Mr,Uf=jf(Function.toString);Df(qr.inspectSource)||(qr.inspectSource=function(e){return Uf(e)});var Wr=qr.inspectSource,Vf=P,Hf=O,Pi=Vf.WeakMap,qf=Hf(Pi)&&/native code/.test(String(Pi)),Wf=mi,zf=_i,Ai=Wf("keys"),zr=function(e){return Ai[e]||(Ai[e]=zf(e))},Gr={},Gf=qf,Mi=P,Kf=ae,Yf=Oe,Kr=Q,Yr=Mr,Xf=zr,Jf=Gr,Ni="Object already initialized",Xr=Mi.TypeError,Zf=Mi.WeakMap,xt,Xe,Et,Qf=function(e){return Et(e)?Xe(e):xt(e,{})},ep=function(e){return function(t){var r;if(!Kf(t)||(r=Xe(t)).type!==e)throw new Xr("Incompatible receiver, "+e+" required");return r}};if(Gf||Yr.state){var te=Yr.state||(Yr.state=new Zf);te.get=te.get,te.has=te.has,te.set=te.set,xt=function(e,t){if(te.has(e))throw new Xr(Ni);return t.facade=e,te.set(e,t),t},Xe=function(e){return te.get(e)||{}},Et=function(e){return te.has(e)}}else{var Ie=Xf("state");Jf[Ie]=!0,xt=function(e,t){if(Kr(e,Ie))throw new Xr(Ni);return t.facade=e,Yf(e,Ie,t),t},Xe=function(e){return Kr(e,Ie)?e[Ie]:{}},Et=function(e){return Kr(e,Ie)}}var Tt={set:xt,get:Xe,has:Et,enforce:Qf,getterFor:ep},Jr=N,tp=L,rp=O,Ot=Q,Zr=J,np=Ri.CONFIGURABLE,op=Wr,Bi=Tt,ip=Bi.enforce,sp=Bi.get,Fi=String,It=Object.defineProperty,ap=Jr("".slice),cp=Jr("".replace),lp=Jr([].join),up=Zr&&!tp(function(){return It(function(){},"length",{value:8}).length!==8}),fp=String(String).split("String"),pp=Oi.exports=function(e,t,r){ap(Fi(t),0,7)==="Symbol("&&(t="["+cp(Fi(t),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(t="get "+t),r&&r.setter&&(t="set "+t),(!Ot(e,"name")||np&&e.name!==t)&&(Zr?It(e,"name",{value:t,configurable:!0}):e.name=t),up&&r&&Ot(r,"arity")&&e.length!==r.arity&&It(e,"length",{value:r.arity});try{r&&Ot(r,"constructor")&&r.constructor?Zr&&It(e,"prototype",{writable:!1}):e.prototype&&(e.prototype=void 0)}catch(o){}var n=ip(e);return Ot(n,"source")||(n.source=lp(fp,typeof t=="string"?t:"")),e};Function.prototype.toString=pp(function(){return rp(this)&&sp(this).source||op(this)},"toString");var Li=Oi.exports,dp=O,hp=le,vp=Li,gp=Ar,ye=function(e,t,r,n){n||(n={});var o=n.enumerable,i=n.name!==void 0?n.name:t;if(dp(r)&&vp(r,i,n),n.global)o?e[t]=r:gp(t,r);else{try{n.unsafe?e[t]&&(o=!0):delete e[t]}catch(s){}o?e[t]=r:hp.f(e,t,{value:r,enumerable:!1,configurable:!n.nonConfigurable,writable:!n.nonWritable})}return e},ji={},mp=Math.ceil,bp=Math.floor,_p=Math.trunc||function(t){var r=+t;return(r>0?bp:mp)(r)},yp=_p,Qr=function(e){var t=+e;return t!==t||t===0?0:yp(t)},wp=Qr,kp=Math.max,$p=Math.min,Cp=function(e,t){var r=wp(e);return r<0?kp(r+t,0):$p(r,t)},Sp=Qr,xp=Math.min,Ep=function(e){return e>0?xp(Sp(e),9007199254740991):0},Tp=Ep,Di=function(e){return Tp(e.length)},Op=Ye,Ip=Cp,Rp=Di,Ui=function(e){return function(t,r,n){var o=Op(t),i=Rp(o),s=Ip(n,i),a;if(e&&r!==r){for(;i>s;)if(a=o[s++],a!==a)return!0}else for(;i>s;s++)if((e||s in o)&&o[s]===r)return e||s||0;return!e&&-1}},Pp={includes:Ui(!0),indexOf:Ui(!1)},Ap=N,en=Q,Mp=Ye,Np=Pp.indexOf,Bp=Gr,Vi=Ap([].push),Hi=function(e,t){var r=Mp(e),n=0,o=[],i;for(i in r)!en(Bp,i)&&en(r,i)&&Vi(o,i);for(;t.length>n;)en(r,i=t[n++])&&(~Np(o,i)||Vi(o,i));return o},tn=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Fp=Hi,Lp=tn,jp=Lp.concat("length","prototype");ji.f=Object.getOwnPropertyNames||function(t){return Fp(t,jp)};var qi={};qi.f=Object.getOwnPropertySymbols;var Dp=ce,Up=N,Vp=ji,Hp=qi,qp=ee,Wp=Up([].concat),zp=Dp("Reflect","ownKeys")||function(t){var r=Vp.f(qp(t)),n=Hp.f;return n?Wp(r,n(t)):r},Wi=Q,Gp=zp,Kp=gt,Yp=le,zi=function(e,t,r){for(var n=Gp(t),o=Yp.f,i=Kp.f,s=0;s<n.length;s++){var a=n[s];!Wi(e,a)&&!(r&&Wi(r,a))&&o(e,a,i(t,a))}},Xp=L,Jp=O,Zp=/#|\.prototype\./,Je=function(e,t){var r=ed[Qp(e)];return r===rd?!0:r===td?!1:Jp(t)?Xp(t):!!t},Qp=Je.normalize=function(e){return String(e).replace(Zp,".").toLowerCase()},ed=Je.data={},td=Je.NATIVE="N",rd=Je.POLYFILL="P",Gi=Je,rn=P,nd=gt.f,od=Oe,id=ye,sd=Ar,ad=zi,cd=Gi,K=function(e,t){var r=e.target,n=e.global,o=e.stat,i,s,a,l,f,p;if(n?s=rn:o?s=rn[r]||sd(r,{}):s=(rn[r]||{}).prototype,s)for(a in t){if(f=t[a],e.dontCallGetSet?(p=nd(s,a),l=p&&p.value):l=s[a],i=cd(n?a:r+(o?".":"#")+a,e.forced),!i&&l!==void 0){if(typeof f==typeof l)continue;ad(f,l)}(e.sham||l&&l.sham)&&od(f,"sham",!0),id(s,a,f,e)}},ld=L,ud=!ld(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),fd=Q,pd=O,dd=bi,hd=zr,vd=ud,Ki=hd("IE_PROTO"),nn=Object,gd=nn.prototype,on=vd?nn.getPrototypeOf:function(e){var t=dd(e);if(fd(t,Ki))return t[Ki];var r=t.constructor;return pd(r)&&t instanceof r?r.prototype:t instanceof nn?gd:null},md=N,bd=Z,_d=function(e,t,r){try{return md(bd(Object.getOwnPropertyDescriptor(e,t)[r]))}catch(n){}},yd=O,wd=String,kd=TypeError,$d=function(e){if(typeof e=="object"||yd(e))return e;throw new kd("Can't set "+wd(e)+" as a prototype")},Cd=_d,Sd=ee,xd=$d,sn=Object.setPrototypeOf||("__proto__"in{}?function(){var e=!1,t={},r;try{r=Cd(Object.prototype,"__proto__","set"),r(t,[]),e=t instanceof Array}catch(n){}return function(o,i){return Sd(o),xd(i),e?r(o,i):o.__proto__=i,o}}():void 0),Yi={},Ed=Hi,Td=tn,Od=Object.keys||function(t){return Ed(t,Td)},Id=J,Rd=Ei,Pd=le,Ad=ee,Md=Ye,Nd=Od;Yi.f=Id&&!Rd?Object.defineProperties:function(t,r){Ad(t);for(var n=Md(r),o=Nd(r),i=o.length,s=0,a;i>s;)Pd.f(t,a=o[s++],n[a]);return t};var Bd=ce,Xi=Bd("document","documentElement"),Fd=ee,Ld=Yi,Ji=tn,jd=Gr,Dd=Xi,Ud=Fr,Vd=zr,Zi=">",Qi="<",an="prototype",cn="script",es=Vd("IE_PROTO"),ln=function(){},ts=function(e){return Qi+cn+Zi+e+Qi+"/"+cn+Zi},rs=function(e){e.write(ts("")),e.close();var t=e.parentWindow.Object;return e=null,t},Hd=function(){var e=Ud("iframe"),t="java"+cn+":",r;return e.style.display="none",Dd.appendChild(e),e.src=String(t),r=e.contentWindow.document,r.open(),r.write(ts("document.F=Object")),r.close(),r.F},Rt,Pt=function(){try{Rt=new ActiveXObject("htmlfile")}catch(t){}Pt=typeof document<"u"?document.domain&&Rt?rs(Rt):Hd():rs(Rt);for(var e=Ji.length;e--;)delete Pt[an][Ji[e]];return Pt()};jd[es]=!0;var un=Object.create||function(t,r){var n;return t!==null?(ln[an]=Fd(t),n=new ln,ln[an]=null,n[es]=t):n=Pt(),r===void 0?n:Ld.f(n,r)},qd=ae,Wd=Oe,zd=function(e,t){qd(t)&&"cause"in t&&Wd(e,"cause",t.cause)},Gd=N,ns=Error,Kd=Gd("".replace),Yd=function(e){return String(new ns(e).stack)}("zxcasd"),os=/\n\s*at [^:]*:[^\n]*/,Xd=os.test(Yd),Jd=function(e,t){if(Xd&&typeof e=="string"&&!ns.prepareStackTrace)for(;t--;)e=Kd(e,os,"");return e},Zd=L,Qd=Ke,eh=!Zd(function(){var e=new Error("a");return"stack"in e?(Object.defineProperty(e,"stack",Qd(1,7)),e.stack!==7):!0}),th=Oe,rh=Jd,nh=eh,is=Error.captureStackTrace,oh=function(e,t,r,n){nh&&(is?is(e,t):th(e,"stack",rh(r,n)))},ih=_t,sh=N,ah=function(e){if(ih(e)==="Function")return sh(e)},ss=ah,ch=Z,lh=mt,uh=ss(ss.bind),fn=function(e,t){return ch(e),t===void 0?e:lh?uh(e,t):function(){return e.apply(t,arguments)}},Ze={},fh=j,ph=Ze,dh=fh("iterator"),hh=Array.prototype,vh=function(e){return e!==void 0&&(ph.Array===e||hh[dh]===e)},gh=j,mh=gh("toStringTag"),as={};as[mh]="z";var pn=String(as)==="[object z]",bh=pn,_h=O,At=_t,yh=j,wh=yh("toStringTag"),kh=Object,$h=At(function(){return arguments}())==="Arguments",Ch=function(e,t){try{return e[t]}catch(r){}},Mt=bh?At:function(e){var t,r,n;return e===void 0?"Undefined":e===null?"Null":typeof(r=Ch(t=kh(e),wh))=="string"?r:$h?At(t):(n=At(t))==="Object"&&_h(t.callee)?"Arguments":n},Sh=Mt,cs=Or,xh=yt,Eh=Ze,Th=j,Oh=Th("iterator"),ls=function(e){if(!xh(e))return cs(e,Oh)||cs(e,"@@iterator")||Eh[Sh(e)]},Ih=q,Rh=Z,Ph=ee,Ah=Ct,Mh=ls,Nh=TypeError,Bh=function(e,t){var r=arguments.length<2?Mh(e):t;if(Rh(r))return Ph(Ih(r,e));throw new Nh(Ah(e)+" is not iterable")},Fh=q,us=ee,Lh=Or,jh=function(e,t,r){var n,o;us(e);try{if(n=Lh(e,"return"),!n){if(t==="throw")throw r;return r}n=Fh(n,e)}catch(i){o=!0,n=i}if(t==="throw")throw r;if(o)throw n;return us(n),r},Dh=fn,Uh=q,Vh=ee,Hh=Ct,qh=vh,Wh=Di,fs=wt,zh=Bh,Gh=ls,ps=jh,Kh=TypeError,Nt=function(e,t){this.stopped=e,this.result=t},ds=Nt.prototype,Qe=function(e,t,r){var n=r&&r.that,o=!!(r&&r.AS_ENTRIES),i=!!(r&&r.IS_RECORD),s=!!(r&&r.IS_ITERATOR),a=!!(r&&r.INTERRUPTED),l=Dh(t,n),f,p,c,d,g,u,v,w=function(y){return f&&ps(f,"normal",y),new Nt(!0,y)},b=function(y){return o?(Vh(y),a?l(y[0],y[1],w):l(y[0],y[1])):a?l(y,w):l(y)};if(i)f=e.iterator;else if(s)f=e;else{if(p=Gh(e),!p)throw new Kh(Hh(e)+" is not iterable");if(qh(p)){for(c=0,d=Wh(e);d>c;c++)if(g=b(e[c]),g&&fs(ds,g))return g;return new Nt(!1)}f=zh(e,p)}for(u=i?e.next:f.next;!(v=Uh(u,f)).done;){try{g=b(v.value)}catch(y){ps(f,"throw",y)}if(typeof g=="object"&&g&&fs(ds,g))return g}return new Nt(!1)},Yh=Mt,Xh=String,dn=function(e){if(Yh(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return Xh(e)},Jh=dn,Zh=function(e,t){return e===void 0?arguments.length<2?"":t:Jh(e)},Qh=K,ev=wt,tv=on,Bt=sn,rv=zi,hs=un,hn=Oe,vn=Ke,nv=zd,ov=oh,iv=Qe,sv=Zh,av=j,cv=av("toStringTag"),Ft=Error,lv=[].push,Re=function(t,r){var n=ev(gn,this),o;Bt?o=Bt(new Ft,n?tv(this):gn):(o=n?this:hs(gn),hn(o,cv,"Error")),r!==void 0&&hn(o,"message",sv(r)),ov(o,Re,o.stack,1),arguments.length>2&&nv(o,arguments[2]);var i=[];return iv(t,lv,{that:i}),hn(o,"errors",i),o};Bt?Bt(Re,Ft):rv(Re,Ft,{name:!0});var gn=Re.prototype=hs(Ft.prototype,{constructor:vn(1,Re),message:vn(1,""),name:vn(1,"AggregateError")});Qh({global:!0,constructor:!0,arity:2},{AggregateError:Re});var uv=j,fv=un,pv=le.f,mn=uv("unscopables"),bn=Array.prototype;bn[mn]===void 0&&pv(bn,mn,{configurable:!0,value:fv(null)});var dv=function(e){bn[mn][e]=!0},hv=L,vv=O,gv=ae,vs=on,mv=ye,bv=j,_n=bv("iterator"),gs=!1,we,yn,wn;[].keys&&(wn=[].keys(),"next"in wn?(yn=vs(vs(wn)),yn!==Object.prototype&&(we=yn)):gs=!0);var _v=!gv(we)||hv(function(){var e={};return we[_n].call(e)!==e});_v&&(we={}),vv(we[_n])||mv(we,_n,function(){return this});var ms={IteratorPrototype:we,BUGGY_SAFARI_ITERATORS:gs},yv=le.f,wv=Q,kv=j,bs=kv("toStringTag"),kn=function(e,t,r){e&&!r&&(e=e.prototype),e&&!wv(e,bs)&&yv(e,bs,{configurable:!0,value:t})},$v=ms.IteratorPrototype,Cv=un,Sv=Ke,xv=kn,Ev=Ze,Tv=function(){return this},Ov=function(e,t,r,n){var o=t+" Iterator";return e.prototype=Cv($v,{next:Sv(+!n,r)}),xv(e,o,!1),Ev[o]=Tv,e},Iv=K,Rv=q,_s=Ri,Pv=O,Av=Ov,ys=on,ws=sn,Mv=kn,Nv=Oe,$n=ye,Bv=j,Fv=Ze,ks=ms,Lv=_s.PROPER,jv=_s.CONFIGURABLE,$s=ks.IteratorPrototype,Lt=ks.BUGGY_SAFARI_ITERATORS,et=Bv("iterator"),Cs="keys",tt="values",Ss="entries",Dv=function(){return this},xs=function(e,t,r,n,o,i,s){Av(r,t,n);var a=function(b){if(b===o&&d)return d;if(!Lt&&b&&b in p)return p[b];switch(b){case Cs:return function(){return new r(this,b)};case tt:return function(){return new r(this,b)};case Ss:return function(){return new r(this,b)}}return function(){return new r(this)}},l=t+" Iterator",f=!1,p=e.prototype,c=p[et]||p["@@iterator"]||o&&p[o],d=!Lt&&c||a(o),g=t==="Array"&&p.entries||c,u,v,w;if(g&&(u=ys(g.call(new e)),u!==Object.prototype&&u.next&&(ys(u)!==$s&&(ws?ws(u,$s):Pv(u[et])||$n(u,et,Dv)),Mv(u,l,!0))),Lv&&o===tt&&c&&c.name!==tt&&(jv?Nv(p,"name",tt):(f=!0,d=function(){return Rv(c,this)})),o)if(v={values:a(tt),keys:i?d:a(Cs),entries:a(Ss)},s)for(w in v)(Lt||f||!(w in p))&&$n(p,w,v[w]);else Iv({target:t,proto:!0,forced:Lt||f},v);return p[et]!==d&&$n(p,et,d,{name:o}),Fv[t]=d,v},Es=function(e,t){return{value:e,done:t}},Uv=Ye,Cn=dv,Ts=Ze,Os=Tt,Vv=le.f,Hv=xs,jt=Es,qv=J,Is="Array Iterator",Wv=Os.set,zv=Os.getterFor(Is);Hv(Array,"Array",function(e,t){Wv(this,{type:Is,target:Uv(e),index:0,kind:t})},function(){var e=zv(this),t=e.target,r=e.index++;if(!t||r>=t.length)return e.target=void 0,jt(void 0,!0);switch(e.kind){case"keys":return jt(r,!1);case"values":return jt(t[r],!1)}return jt([r,t[r]],!1)},"values");var Rs=Ts.Arguments=Ts.Array;if(Cn("keys"),Cn("values"),Cn("entries"),qv&&Rs.name!=="values")try{Vv(Rs,"name",{value:"values"})}catch(e){}var Gv=pn,Kv=Mt,Yv=Gv?{}.toString:function(){return"[object "+Kv(this)+"]"},Xv=pn,Jv=ye,Zv=Yv;Xv||Jv(Object.prototype,"toString",Zv,{unsafe:!0});var Qv=P,eg=_t,Dt=eg(Qv.process)==="process",Ps=Li,tg=le,rg=function(e,t,r){return r.get&&Ps(r.get,t,{getter:!0}),r.set&&Ps(r.set,t,{setter:!0}),tg.f(e,t,r)},ng=ce,og=rg,ig=j,sg=J,As=ig("species"),ag=function(e){var t=ng(e);sg&&t&&!t[As]&&og(t,As,{configurable:!0,get:function(){return this}})},cg=wt,lg=TypeError,ug=function(e,t){if(cg(t,e))return e;throw new lg("Incorrect invocation")},fg=N,pg=L,Ms=O,dg=Mt,hg=ce,vg=Wr,Ns=function(){},gg=[],Bs=hg("Reflect","construct"),Sn=/^\s*(?:class|function)\b/,mg=fg(Sn.exec),bg=!Sn.test(Ns),rt=function(t){if(!Ms(t))return!1;try{return Bs(Ns,gg,t),!0}catch(r){return!1}},Fs=function(t){if(!Ms(t))return!1;switch(dg(t)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return bg||!!mg(Sn,vg(t))}catch(r){return!0}};Fs.sham=!0;var _g=!Bs||pg(function(){var e;return rt(rt.call)||!rt(Object)||!rt(function(){e=!0})||e})?Fs:rt,yg=_g,wg=Ct,kg=TypeError,$g=function(e){if(yg(e))return e;throw new kg(wg(e)+" is not a constructor")},Ls=ee,Cg=$g,Sg=yt,xg=j,Eg=xg("species"),js=function(e,t){var r=Ls(e).constructor,n;return r===void 0||Sg(n=Ls(r)[Eg])?t:Cg(n)},Tg=mt,Ds=Function.prototype,Us=Ds.apply,Vs=Ds.call,Og=typeof Reflect=="object"&&Reflect.apply||(Tg?Vs.bind(Us):function(){return Vs.apply(Us,arguments)}),Ig=N,Rg=Ig([].slice),Pg=TypeError,Ag=function(e,t){if(e<t)throw new Pg("Not enough arguments");return e},Mg=kt,Hs=/(?:ipad|iphone|ipod).*applewebkit/i.test(Mg),W=P,Ng=Og,Bg=fn,qs=O,Fg=Q,Ws=L,zs=Xi,Lg=Rg,Gs=Fr,jg=Ag,Dg=Hs,Ug=Dt,xn=W.setImmediate,En=W.clearImmediate,Vg=W.process,Tn=W.Dispatch,Hg=W.Function,Ks=W.MessageChannel,qg=W.String,On=0,nt={},Ys="onreadystatechange",ot,ke,In,Rn;Ws(function(){ot=W.location});var Pn=function(e){if(Fg(nt,e)){var t=nt[e];delete nt[e],t()}},An=function(e){return function(){Pn(e)}},Xs=function(e){Pn(e.data)},Js=function(e){W.postMessage(qg(e),ot.protocol+"//"+ot.host)};(!xn||!En)&&(xn=function(t){jg(arguments.length,1);var r=qs(t)?t:Hg(t),n=Lg(arguments,1);return nt[++On]=function(){Ng(r,void 0,n)},ke(On),On},En=function(t){delete nt[t]},Ug?ke=function(e){Vg.nextTick(An(e))}:Tn&&Tn.now?ke=function(e){Tn.now(An(e))}:Ks&&!Dg?(In=new Ks,Rn=In.port2,In.port1.onmessage=Xs,ke=Bg(Rn.postMessage,Rn)):W.addEventListener&&qs(W.postMessage)&&!W.importScripts&&ot&&ot.protocol!=="file:"&&!Ws(Js)?(ke=Js,W.addEventListener("message",Xs,!1)):Ys in Gs("script")?ke=function(e){zs.appendChild(Gs("script"))[Ys]=function(){zs.removeChild(this),Pn(e)}}:ke=function(e){setTimeout(An(e),0)});var Zs={set:xn,clear:En},Qs=function(){this.head=null,this.tail=null};Qs.prototype={add:function(e){var t={item:e,next:null},r=this.tail;r?r.next=t:this.head=t,this.tail=t},get:function(){var e=this.head;if(e){var t=this.head=e.next;return t===null&&(this.tail=null),e.item}}};var ea=Qs,Wg=kt,zg=/ipad|iphone|ipod/i.test(Wg)&&typeof Pebble<"u",Gg=kt,Kg=/web0s(?!.*chrome)/i.test(Gg),$e=P,ta=fn,Yg=gt.f,Mn=Zs.set,Xg=ea,Jg=Hs,Zg=zg,Qg=Kg,Nn=Dt,ra=$e.MutationObserver||$e.WebKitMutationObserver,na=$e.document,oa=$e.process,Ut=$e.Promise,ia=Yg($e,"queueMicrotask"),Bn=ia&&ia.value,Pe,Fn,Ln,Vt,sa;if(!Bn){var Ht=new Xg,qt=function(){var e,t;for(Nn&&(e=oa.domain)&&e.exit();t=Ht.get();)try{t()}catch(r){throw Ht.head&&Pe(),r}e&&e.enter()};!Jg&&!Nn&&!Qg&&ra&&na?(Fn=!0,Ln=na.createTextNode(""),new ra(qt).observe(Ln,{characterData:!0}),Pe=function(){Ln.data=Fn=!Fn}):!Zg&&Ut&&Ut.resolve?(Vt=Ut.resolve(void 0),Vt.constructor=Ut,sa=ta(Vt.then,Vt),Pe=function(){sa(qt)}):Nn?Pe=function(){oa.nextTick(qt)}:(Mn=ta(Mn,$e),Pe=function(){Mn(qt)}),Bn=function(e){Ht.head||Pe(),Ht.add(e)}}var em=Bn,tm=function(e,t){try{arguments.length===1?console.error(e):console.error(e,t)}catch(r){}},it=function(e){try{return{error:!1,value:e()}}catch(t){return{error:!0,value:t}}},rm=P,st=rm.Promise,aa=typeof Deno=="object"&&Deno&&typeof Deno.version=="object",nm=aa,om=Dt,im=!nm&&!om&&typeof window=="object"&&typeof document=="object",sm=P,at=st,am=O,cm=Gi,lm=Wr,um=j,fm=im,pm=aa,jn=ci;at&&at.prototype;var dm=um("species"),Dn=!1,ca=am(sm.PromiseRejectionEvent),hm=cm("Promise",function(){var e=lm(at),t=e!==String(at);if(!t&&jn===66)return!0;if(!jn||jn<51||!/native code/.test(e)){var r=new at(function(i){i(1)}),n=function(i){i(function(){},function(){})},o=r.constructor={};if(o[dm]=n,Dn=r.then(function(){})instanceof n,!Dn)return!0}return!t&&(fm||pm)&&!ca}),ct={CONSTRUCTOR:hm,REJECTION_EVENT:ca,SUBCLASSING:Dn},de={},la=Z,vm=TypeError,gm=function(e){var t,r;this.promise=new e(function(n,o){if(t!==void 0||r!==void 0)throw new vm("Bad Promise constructor");t=n,r=o}),this.resolve=la(t),this.reject=la(r)};de.f=function(e){return new gm(e)};var mm=K,Wt=Dt,he=P,Ae=q,ua=ye,fa=sn,bm=kn,_m=ag,ym=Z,zt=O,wm=ae,km=ug,$m=js,pa=Zs.set,Un=em,Cm=tm,Sm=it,xm=ea,da=Tt,Gt=st,Vn=ct,ha=de,Kt="Promise",va=Vn.CONSTRUCTOR,Em=Vn.REJECTION_EVENT,Tm=Vn.SUBCLASSING,Hn=da.getterFor(Kt),Om=da.set,Me=Gt&&Gt.prototype,Ce=Gt,Yt=Me,ga=he.TypeError,qn=he.document,Wn=he.process,zn=ha.f,Im=zn,Rm=!!(qn&&qn.createEvent&&he.dispatchEvent),ma="unhandledrejection",Pm="rejectionhandled",ba=0,_a=1,Am=2,Gn=1,ya=2,Xt,wa,Mm,ka,$a=function(e){var t;return wm(e)&&zt(t=e.then)?t:!1},Ca=function(e,t){var r=t.value,n=t.state===_a,o=n?e.ok:e.fail,i=e.resolve,s=e.reject,a=e.domain,l,f,p;try{o?(n||(t.rejection===ya&&Bm(t),t.rejection=Gn),o===!0?l=r:(a&&a.enter(),l=o(r),a&&(a.exit(),p=!0)),l===e.promise?s(new ga("Promise-chain cycle")):(f=$a(l))?Ae(f,l,i,s):i(l)):s(r)}catch(c){a&&!p&&a.exit(),s(c)}},Sa=function(e,t){e.notified||(e.notified=!0,Un(function(){for(var r=e.reactions,n;n=r.get();)Ca(n,e);e.notified=!1,t&&!e.rejection&&Nm(e)}))},xa=function(e,t,r){var n,o;Rm?(n=qn.createEvent("Event"),n.promise=t,n.reason=r,n.initEvent(e,!1,!0),he.dispatchEvent(n)):n={promise:t,reason:r},!Em&&(o=he["on"+e])?o(n):e===ma&&Cm("Unhandled promise rejection",r)},Nm=function(e){Ae(pa,he,function(){var t=e.facade,r=e.value,n=Ea(e),o;if(n&&(o=Sm(function(){Wt?Wn.emit("unhandledRejection",r,t):xa(ma,t,r)}),e.rejection=Wt||Ea(e)?ya:Gn,o.error))throw o.value})},Ea=function(e){return e.rejection!==Gn&&!e.parent},Bm=function(e){Ae(pa,he,function(){var t=e.facade;Wt?Wn.emit("rejectionHandled",t):xa(Pm,t,e.value)})},Ne=function(e,t,r){return function(n){e(t,n,r)}},Be=function(e,t,r){e.done||(e.done=!0,r&&(e=r),e.value=t,e.state=Am,Sa(e,!0))},Kn=function(e,t,r){if(!e.done){e.done=!0,r&&(e=r);try{if(e.facade===t)throw new ga("Promise can't be resolved itself");var n=$a(t);n?Un(function(){var o={done:!1};try{Ae(n,t,Ne(Kn,o,e),Ne(Be,o,e))}catch(i){Be(o,i,e)}}):(e.value=t,e.state=_a,Sa(e,!1))}catch(o){Be({done:!1},o,e)}}};if(va&&(Ce=function(t){km(this,Yt),ym(t),Ae(Xt,this);var r=Hn(this);try{t(Ne(Kn,r),Ne(Be,r))}catch(n){Be(r,n)}},Yt=Ce.prototype,Xt=function(t){Om(this,{type:Kt,done:!1,notified:!1,parent:!1,reactions:new xm,rejection:!1,state:ba,value:void 0})},Xt.prototype=ua(Yt,"then",function(t,r){var n=Hn(this),o=zn($m(this,Ce));return n.parent=!0,o.ok=zt(t)?t:!0,o.fail=zt(r)&&r,o.domain=Wt?Wn.domain:void 0,n.state===ba?n.reactions.add(o):Un(function(){Ca(o,n)}),o.promise}),wa=function(){var e=new Xt,t=Hn(e);this.promise=e,this.resolve=Ne(Kn,t),this.reject=Ne(Be,t)},ha.f=zn=function(e){return e===Ce||e===Mm?new wa(e):Im(e)},zt(Gt)&&Me!==Object.prototype)){ka=Me.then,Tm||ua(Me,"then",function(t,r){var n=this;return new Ce(function(o,i){Ae(ka,n,o,i)}).then(t,r)},{unsafe:!0});try{delete Me.constructor}catch(e){}fa&&fa(Me,Yt)}mm({global:!0,constructor:!0,wrap:!0,forced:va},{Promise:Ce}),bm(Ce,Kt,!1),_m(Kt);var Fm=j,Ta=Fm("iterator"),Oa=!1;try{var Lm=0,Ia={next:function(){return{done:!!Lm++}},return:function(){Oa=!0}};Ia[Ta]=function(){return this},Array.from(Ia,function(){throw 2})}catch(e){}var jm=function(e,t){try{if(!t&&!Oa)return!1}catch(o){return!1}var r=!1;try{var n={};n[Ta]=function(){return{next:function(){return{done:r=!0}}}},e(n)}catch(o){}return r},Dm=st,Um=jm,Vm=ct.CONSTRUCTOR,Jt=Vm||!Um(function(e){Dm.all(e).then(void 0,function(){})}),Hm=K,qm=q,Wm=Z,zm=de,Gm=it,Km=Qe,Ym=Jt;Hm({target:"Promise",stat:!0,forced:Ym},{all:function(t){var r=this,n=zm.f(r),o=n.resolve,i=n.reject,s=Gm(function(){var a=Wm(r.resolve),l=[],f=0,p=1;Km(t,function(c){var d=f++,g=!1;p++,qm(a,r,c).then(function(u){g||(g=!0,l[d]=u,--p||o(l))},i)}),--p||o(l)});return s.error&&i(s.value),n.promise}});var Xm=K,Jm=ct.CONSTRUCTOR,Yn=st,Zm=ce,Qm=O,eb=ye,Ra=Yn&&Yn.prototype;if(Xm({target:"Promise",proto:!0,forced:Jm,real:!0},{catch:function(e){return this.then(void 0,e)}}),Qm(Yn)){var Pa=Zm("Promise").prototype.catch;Ra.catch!==Pa&&eb(Ra,"catch",Pa,{unsafe:!0})}var tb=K,rb=q,nb=Z,ob=de,ib=it,sb=Qe,ab=Jt;tb({target:"Promise",stat:!0,forced:ab},{race:function(t){var r=this,n=ob.f(r),o=n.reject,i=ib(function(){var s=nb(r.resolve);sb(t,function(a){rb(s,r,a).then(n.resolve,o)})});return i.error&&o(i.value),n.promise}});var cb=K,lb=q,ub=de,fb=ct.CONSTRUCTOR;cb({target:"Promise",stat:!0,forced:fb},{reject:function(t){var r=ub.f(this);return lb(r.reject,void 0,t),r.promise}});var pb=ee,db=ae,hb=de,Aa=function(e,t){if(pb(e),db(t)&&t.constructor===e)return t;var r=hb.f(e),n=r.resolve;return n(t),r.promise},vb=K,gb=ce,mb=ct.CONSTRUCTOR,bb=Aa;gb("Promise"),vb({target:"Promise",stat:!0,forced:mb},{resolve:function(t){return bb(this,t)}});var _b=K,yb=q,wb=Z,kb=de,$b=it,Cb=Qe,Sb=Jt;_b({target:"Promise",stat:!0,forced:Sb},{allSettled:function(t){var r=this,n=kb.f(r),o=n.resolve,i=n.reject,s=$b(function(){var a=wb(r.resolve),l=[],f=0,p=1;Cb(t,function(c){var d=f++,g=!1;p++,yb(a,r,c).then(function(u){g||(g=!0,l[d]={status:"fulfilled",value:u},--p||o(l))},function(u){g||(g=!0,l[d]={status:"rejected",reason:u},--p||o(l))})}),--p||o(l)});return s.error&&i(s.value),n.promise}});var xb=K,Eb=q,Tb=Z,Ob=ce,Ib=de,Rb=it,Pb=Qe,Ab=Jt,Ma="No one promise resolved";xb({target:"Promise",stat:!0,forced:Ab},{any:function(t){var r=this,n=Ob("AggregateError"),o=Ib.f(r),i=o.resolve,s=o.reject,a=Rb(function(){var l=Tb(r.resolve),f=[],p=0,c=1,d=!1;Pb(t,function(g){var u=p++,v=!1;c++,Eb(l,r,g).then(function(w){v||d||(d=!0,i(w))},function(w){v||d||(v=!0,f[u]=w,--c||s(new n(f,Ma)))})}),--c||s(new n(f,Ma))});return a.error&&s(a.value),o.promise}});var Mb=K,Zt=st,Nb=L,Na=ce,Ba=O,Bb=js,Fa=Aa,Fb=ye,Xn=Zt&&Zt.prototype,Lb=!!Zt&&Nb(function(){Xn.finally.call({then:function(){}},function(){})});if(Mb({target:"Promise",proto:!0,real:!0,forced:Lb},{finally:function(e){var t=Bb(this,Na("Promise")),r=Ba(e);return this.then(r?function(n){return Fa(t,e()).then(function(){return n})}:e,r?function(n){return Fa(t,e()).then(function(){throw n})}:e)}}),Ba(Zt)){var La=Na("Promise").prototype.finally;Xn.finally!==La&&Fb(Xn,"finally",La,{unsafe:!0})}var Jn=N,jb=Qr,Db=dn,Ub=Sr,Vb=Jn("".charAt),ja=Jn("".charCodeAt),Hb=Jn("".slice),Da=function(e){return function(t,r){var n=Db(Ub(t)),o=jb(r),i=n.length,s,a;return o<0||o>=i?e?"":void 0:(s=ja(n,o),s<55296||s>56319||o+1===i||(a=ja(n,o+1))<56320||a>57343?e?Vb(n,o):s:e?Hb(n,o,o+2):(s-55296<<10)+(a-56320)+65536)}},qb={codeAt:Da(!1),charAt:Da(!0)},Wb=qb.charAt,zb=dn,Ua=Tt,Gb=xs,Va=Es,Ha="String Iterator",Kb=Ua.set,Yb=Ua.getterFor(Ha);Gb(String,"String",function(e){Kb(this,{type:Ha,string:zb(e),index:0})},function(){var t=Yb(this),r=t.string,n=t.index,o;return n>=r.length?Va(void 0,!0):(o=Wb(r,n),t.index+=o.length,Va(o,!1))});var Xb=P,Jb=Xb,Zb=Jb;Zb.Promise;const re={production:!0,VAR_ORIGIN:"https://line-sec.karakuri.ai",VAR_TRACKING_ID:"",VAR_TRACKING_SCRIPT_URL:"https://analytics.karakuri.ai/v1/analytics.js",VAR_IS_MODERN:"true"};function Qb(e,t,r){var o;const n=(r==null?void 0:r.disableTracking)==="true";if(e&&t&&!n){const i=document.getElementsByTagName("script")[0],s=document.createElement("script");s.async=!0,s.src=t,s.dataset.karakuriTracking=e,r&&Object.keys(r).forEach(a=>{const l=r[a];l&&(s.dataset[a]=`${l}`)}),(o=i.parentNode)==null||o.insertBefore(s,i)}}function e_(e){e&&Y("open-chatbot",e.serviceId,e.actionId)}function t_(e){e&&Y("close-chatbot",e.serviceId,e.actionId)}function qa(e){e&&Y("remove-chatbot",e.serviceId,e.actionId)}function r_(e){e&&Y("open-balloon",e.serviceId,e.actionId)}function n_(e){e&&Y("close-balloon",e.serviceId,e.actionId)}function Wa(e){e&&Y("troubled",e.serviceId,e.actionId)}function o_(e,t){e&&Y("popup-v2:click",e.serviceId,e.actionId,t)}function i_(e){e&&Y("popup-message:click-action-button",e.serviceId,e.actionId)}function s_(e){e&&Y("popup-message:click-close-button",e.serviceId,e.actionId)}function a_(e){e&&Y("popup-message:click-backdrop",e.serviceId,e.actionId)}function c_(e){e&&Y("delivered",e.serviceId,e.actionId,{newArrival:e.newArrival})}function Y(e,t,r,n){if(t&&r){const o=setInterval(function(){window.krkr&&(window.krkr("service",{...n,serviceId:t,actionId:r,event:e}),clearInterval(o))},100)}}const Zn=document.currentScript,za="__krkr-action-preview",Ga=()=>{var t;const e=(t=Zn==null?void 0:Zn.dataset)!=null?t:{};return Object.keys(e).reduce((r,n)=>{const o=e[n];return o?{...r,[n]:o}:r},{})};function l_(){const e=new URLSearchParams(window.location.search),t={},r=e.get(za);return typeof r=="string"&&(t.preview=r),t}function u_(){const e=new URLSearchParams(window.location.search);e.delete(za);const t=decodeURIComponent(e.toString());return window.location.origin+window.location.pathname+(t?`?${t}`:"")+window.location.hash}function f_(){const e=Se();return e==null?void 0:e.clientId}function p_(){const e=Se();return e==null?void 0:e.sessionId}function d_(){const e=Se();return e==null?void 0:e.sessionExpiredAt}function h_(){const e=Se();return e==null?void 0:e.token}function v_(e){const t=Se();localStorage.setItem("krkr",JSON.stringify({...t,token:e}))}function Se(){try{const e=localStorage.getItem("krkr");if(e)return JSON.parse(e)}catch(e){localStorage.setItem("krkr","")}return{}}function g_(){const e=Se();return e.serviceHistories?e.serviceHistories:[]}function Ka(e,t){const n=Se();n.serviceHistories?n.serviceHistories=[{service:e,action:t},...n.serviceHistories.filter(o=>o.service!==e)]:n.serviceHistories=[{service:e,action:t}],n.serviceHistories.length>100&&(n.serviceHistories=n.serviceHistories.slice(0,100)),localStorage.setItem("krkr",JSON.stringify(n))}var Qn={exports:{}},Ya=function(t,r){return function(){for(var o=new Array(arguments.length),i=0;i<o.length;i++)o[i]=arguments[i];return t.apply(r,o)}};/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var m_=function(e){return e!=null&&(Xa(e)||b_(e)||!!e._isBuffer)};function Xa(e){return!!e.constructor&&typeof e.constructor.isBuffer=="function"&&e.constructor.isBuffer(e)}function b_(e){return typeof e.readFloatLE=="function"&&typeof e.slice=="function"&&Xa(e.slice(0,0))}var __=Ya,y_=m_,Fe=Object.prototype.toString;function Ja(e){return Fe.call(e)==="[object Array]"}function w_(e){return Fe.call(e)==="[object ArrayBuffer]"}function k_(e){return typeof FormData<"u"&&e instanceof FormData}function $_(e){var t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&e.buffer instanceof ArrayBuffer,t}function C_(e){return typeof e=="string"}function S_(e){return typeof e=="number"}function x_(e){return typeof e>"u"}function Za(e){return e!==null&&typeof e=="object"}function E_(e){return Fe.call(e)==="[object Date]"}function T_(e){return Fe.call(e)==="[object File]"}function O_(e){return Fe.call(e)==="[object Blob]"}function Qa(e){return Fe.call(e)==="[object Function]"}function I_(e){return Za(e)&&Qa(e.pipe)}function R_(e){return typeof URLSearchParams<"u"&&e instanceof URLSearchParams}function P_(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}function A_(){return typeof navigator<"u"&&navigator.product==="ReactNative"?!1:typeof window<"u"&&typeof document<"u"}function eo(e,t){if(!(e===null||typeof e>"u"))if(typeof e!="object"&&(e=[e]),Ja(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}function ec(){var e={};function t(o,i){typeof e[i]=="object"&&typeof o=="object"?e[i]=ec(e[i],o):e[i]=o}for(var r=0,n=arguments.length;r<n;r++)eo(arguments[r],t);return e}function M_(e,t,r){return eo(t,function(o,i){r&&typeof o=="function"?e[i]=__(o,r):e[i]=o}),e}var z={isArray:Ja,isArrayBuffer:w_,isBuffer:y_,isFormData:k_,isArrayBufferView:$_,isString:C_,isNumber:S_,isObject:Za,isUndefined:x_,isDate:E_,isFile:T_,isBlob:O_,isFunction:Qa,isStream:I_,isURLSearchParams:R_,isStandardBrowserEnv:A_,forEach:eo,merge:ec,extend:M_,trim:P_},N_=z,B_=function(t,r){N_.forEach(t,function(o,i){i!==r&&i.toUpperCase()===r.toUpperCase()&&(t[r]=o,delete t[i])})},to,tc;function F_(){return tc||(tc=1,to=function(t,r,n,o,i){return t.config=r,n&&(t.code=n),t.request=o,t.response=i,t}),to}var ro,rc;function nc(){if(rc)return ro;rc=1;var e=F_();return ro=function(r,n,o,i,s){var a=new Error(r);return e(a,n,o,i,s)},ro}var no,oc;function L_(){if(oc)return no;oc=1;var e=nc();return no=function(r,n,o){var i=o.config.validateStatus;!o.status||!i||i(o.status)?r(o):n(e("Request failed with status code "+o.status,o.config,null,o.request,o))},no}var oo,ic;function j_(){if(ic)return oo;ic=1;var e=z;function t(r){return encodeURIComponent(r).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return oo=function(n,o,i){if(!o)return n;var s;if(i)s=i(o);else if(e.isURLSearchParams(o))s=o.toString();else{var a=[];e.forEach(o,function(f,p){f===null||typeof f>"u"||(e.isArray(f)?p=p+"[]":f=[f],e.forEach(f,function(d){e.isDate(d)?d=d.toISOString():e.isObject(d)&&(d=JSON.stringify(d)),a.push(t(p)+"="+t(d))}))}),s=a.join("&")}return s&&(n+=(n.indexOf("?")===-1?"?":"&")+s),n},oo}var io,sc;function D_(){if(sc)return io;sc=1;var e=z,t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return io=function(n){var o={},i,s,a;return n&&e.forEach(n.split(`
`),function(f){if(a=f.indexOf(":"),i=e.trim(f.substr(0,a)).toLowerCase(),s=e.trim(f.substr(a+1)),i){if(o[i]&&t.indexOf(i)>=0)return;i==="set-cookie"?o[i]=(o[i]?o[i]:[]).concat([s]):o[i]=o[i]?o[i]+", "+s:s}}),o},io}var so,ac;function U_(){if(ac)return so;ac=1;var e=z;return so=e.isStandardBrowserEnv()?function(){var r=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a"),o;function i(s){var a=s;return r&&(n.setAttribute("href",a),a=n.href),n.setAttribute("href",a),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return o=i(window.location.href),function(a){var l=e.isString(a)?i(a):a;return l.protocol===o.protocol&&l.host===o.host}}():function(){return function(){return!0}}(),so}var ao,cc;function V_(){if(cc)return ao;cc=1;var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function t(){this.message="String contains an invalid character"}t.prototype=new Error,t.prototype.code=5,t.prototype.name="InvalidCharacterError";function r(n){for(var o=String(n),i="",s,a,l=0,f=e;o.charAt(l|0)||(f="=",l%1);i+=f.charAt(63&s>>8-l%1*8)){if(a=o.charCodeAt(l+=3/4),a>255)throw new t;s=s<<8|a}return i}return ao=r,ao}var co,lc;function H_(){if(lc)return co;lc=1;var e=z;return co=e.isStandardBrowserEnv()?function(){return{write:function(n,o,i,s,a,l){var f=[];f.push(n+"="+encodeURIComponent(o)),e.isNumber(i)&&f.push("expires="+new Date(i).toGMTString()),e.isString(s)&&f.push("path="+s),e.isString(a)&&f.push("domain="+a),l===!0&&f.push("secure"),document.cookie=f.join("; ")},read:function(n){var o=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return o?decodeURIComponent(o[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),co}var lo,uc;function fc(){if(uc)return lo;uc=1;var e=z,t=L_(),r=j_(),n=D_(),o=U_(),i=nc(),s=typeof window<"u"&&window.btoa&&window.btoa.bind(window)||V_();return lo=function(l){return new Promise(function(p,c){var d=l.data,g=l.headers;e.isFormData(d)&&delete g["Content-Type"];var u=new XMLHttpRequest,v="onreadystatechange",w=!1;if(typeof window<"u"&&window.XDomainRequest&&!("withCredentials"in u)&&!o(l.url)&&(u=new window.XDomainRequest,v="onload",w=!0,u.onprogress=function(){},u.ontimeout=function(){}),l.auth){var b=l.auth.username||"",y=l.auth.password||"";g.Authorization="Basic "+s(b+":"+y)}if(u.open(l.method.toUpperCase(),r(l.url,l.params,l.paramsSerializer),!0),u.timeout=l.timeout,u[v]=function(){if(!(!u||u.readyState!==4&&!w)&&!(u.status===0&&!(u.responseURL&&u.responseURL.indexOf("file:")===0))){var T="getAllResponseHeaders"in u?n(u.getAllResponseHeaders()):null,R=!l.responseType||l.responseType==="text"?u.responseText:u.response,V={data:R,status:u.status===1223?204:u.status,statusText:u.status===1223?"No Content":u.statusText,headers:T,config:l,request:u};t(p,c,V),u=null}},u.onerror=function(){c(i("Network Error",l,null,u)),u=null},u.ontimeout=function(){c(i("timeout of "+l.timeout+"ms exceeded",l,"ECONNABORTED",u)),u=null},e.isStandardBrowserEnv()){var S=H_(),x=(l.withCredentials||o(l.url))&&l.xsrfCookieName?S.read(l.xsrfCookieName):void 0;x&&(g[l.xsrfHeaderName]=x)}if("setRequestHeader"in u&&e.forEach(g,function(T,R){typeof d>"u"&&R.toLowerCase()==="content-type"?delete g[R]:u.setRequestHeader(R,T)}),l.withCredentials&&(u.withCredentials=!0),l.responseType)try{u.responseType=l.responseType}catch($){if(l.responseType!=="json")throw $}typeof l.onDownloadProgress=="function"&&u.addEventListener("progress",l.onDownloadProgress),typeof l.onUploadProgress=="function"&&u.upload&&u.upload.addEventListener("progress",l.onUploadProgress),l.cancelToken&&l.cancelToken.promise.then(function(T){u&&(u.abort(),c(T),u=null)}),d===void 0&&(d=null),u.send(d)})},lo}var D=z,q_=B_,W_={"Content-Type":"application/x-www-form-urlencoded"};function pc(e,t){!D.isUndefined(e)&&D.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}function z_(){var e;return(typeof XMLHttpRequest<"u"||typeof process<"u")&&(e=fc()),e}var Qt={adapter:z_(),transformRequest:[function(t,r){return q_(r,"Content-Type"),D.isFormData(t)||D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t)?t:D.isArrayBufferView(t)?t.buffer:D.isURLSearchParams(t)?(pc(r,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):D.isObject(t)?(pc(r,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if(typeof t=="string")try{t=JSON.parse(t)}catch(r){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(t){return t>=200&&t<300}};Qt.headers={common:{Accept:"application/json, text/plain, */*"}},D.forEach(["delete","get","head"],function(t){Qt.headers[t]={}}),D.forEach(["post","put","patch"],function(t){Qt.headers[t]=D.merge(W_)});var uo=Qt,G_=z;function er(){this.handlers=[]}er.prototype.use=function(t,r){return this.handlers.push({fulfilled:t,rejected:r}),this.handlers.length-1},er.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},er.prototype.forEach=function(t){G_.forEach(this.handlers,function(n){n!==null&&t(n)})};var K_=er,Y_=z,X_=function(t,r,n){return Y_.forEach(n,function(i){t=i(t,r)}),t},fo,dc;function hc(){return dc||(dc=1,fo=function(t){return!!(t&&t.__CANCEL__)}),fo}var J_=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)},Z_=function(t,r){return r?t.replace(/\/+$/,"")+"/"+r.replace(/^\/+/,""):t},vc=z,po=X_,Q_=hc(),ey=uo,ty=J_,ry=Z_;function ho(e){e.cancelToken&&e.cancelToken.throwIfRequested()}var ny=function(t){ho(t),t.baseURL&&!ty(t.url)&&(t.url=ry(t.baseURL,t.url)),t.headers=t.headers||{},t.data=po(t.data,t.headers,t.transformRequest),t.headers=vc.merge(t.headers.common||{},t.headers[t.method]||{},t.headers||{}),vc.forEach(["delete","get","head","post","put","patch","common"],function(o){delete t.headers[o]});var r=t.adapter||ey.adapter;return r(t).then(function(o){return ho(t),o.data=po(o.data,o.headers,t.transformResponse),o},function(o){return Q_(o)||(ho(t),o&&o.response&&(o.response.data=po(o.response.data,o.response.headers,t.transformResponse))),Promise.reject(o)})},oy=uo,Le=z,gc=K_,iy=ny;function tr(e){this.defaults=e,this.interceptors={request:new gc,response:new gc}}tr.prototype.request=function(t){typeof t=="string"&&(t=Le.merge({url:arguments[0]},arguments[1])),t=Le.merge(oy,{method:"get"},this.defaults,t),t.method=t.method.toLowerCase();var r=[iy,void 0],n=Promise.resolve(t);for(this.interceptors.request.forEach(function(i){r.unshift(i.fulfilled,i.rejected)}),this.interceptors.response.forEach(function(i){r.push(i.fulfilled,i.rejected)});r.length;)n=n.then(r.shift(),r.shift());return n},Le.forEach(["delete","get","head","options"],function(t){tr.prototype[t]=function(r,n){return this.request(Le.merge(n||{},{method:t,url:r}))}}),Le.forEach(["post","put","patch"],function(t){tr.prototype[t]=function(r,n,o){return this.request(Le.merge(o||{},{method:t,url:r,data:n}))}});var sy=tr,vo,mc;function bc(){if(mc)return vo;mc=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,vo=e,vo}var go,_c;function ay(){if(_c)return go;_c=1;var e=bc();function t(r){if(typeof r!="function")throw new TypeError("executor must be a function.");var n;this.promise=new Promise(function(s){n=s});var o=this;r(function(s){o.reason||(o.reason=new e(s),n(o.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var n,o=new t(function(s){n=s});return{token:o,cancel:n}},go=t,go}var mo,yc;function cy(){return yc||(yc=1,mo=function(t){return function(n){return t.apply(null,n)}}),mo}var bo=z,ly=Ya,rr=sy,wc=uo;function kc(e){var t=new rr(e),r=ly(rr.prototype.request,t);return bo.extend(r,rr.prototype,t),bo.extend(r,t),r}var ue=kc(wc);ue.Axios=rr,ue.create=function(t){return kc(bo.merge(wc,t))},ue.Cancel=bc(),ue.CancelToken=ay(),ue.isCancel=hc(),ue.all=function(t){return Promise.all(t)},ue.spread=cy(),Qn.exports=ue,Qn.exports.default=ue;var uy=Qn.exports,fy=uy;const xe=zo(fy);async function py(e,t,r){try{const{zendeskSession:n,zendeskTags:o}=r;if(!n)return;const i=await xe.get(`${e}/api/action/integrations/zendesk`,{params:{referrer:t}}),{accountKey:s}=i.data,a=document.createElement("script");a.src=`${e}/embed/lib/zendesk/web-sdk.js`,a.addEventListener("load",()=>{let l=!1;window.zChat.on("connection_update",f=>{f==="connected"&&!l&&(l=!0,o&&window.zChat.addTags(o.split(",")))}),window.zChat.init({account_key:s,authentication:{jwt_fn:f=>f(n)}})}),document.body.appendChild(a)}catch(n){}}const $c=(e,...t)=>{localStorage.KARAKURI_DEBUG&&console.log(e,...t)};function dy(e){return!!(e!=null&&e.name)}class Cc{static find(t){if(window.krkrLayer)for(let r=0;r<window.krkrLayer.length;r++){const n=window.krkrLayer.length-r-1;if(window.krkrLayer[n].name===t)return window.krkrLayer[n]}}static append(t){$c(`[KARAKURI ACTION] Append customEvent.
`,t),window.krkrLayer||(window.krkrLayer=[]),window.krkrLayer.push(t)}}var je=(e=>(e.chatbot="chatbot",e.chatbotIframe="chatbot-iframe",e.chatbotButton="chatbot-button",e.popupMessage="popup-message",e.none="none",e))(je||{}),De=(e=>(e.popupV1="popup-v1",e.popupV2="popup-v2",e))(De||{}),_o=(e=>(e.always="always",e.timer="timer",e.ai="ai",e))(_o||{}),lt=(e=>(e.text="text",e.image="image",e.button="button",e.html="html",e))(lt||{}),U=(e=>(e.openChatbot="open-chatbot",e.openUrl="open-url",e.popupChatbot="popup-chatbot",e.none="none",e))(U||{}),nr,_,Sc,Ee,xc,Ec,yo,Ue={},Tc=[],hy=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,or=Array.isArray;function ve(e,t){for(var r in t)e[r]=t[r];return e}function Oc(e){var t=e.parentNode;t&&t.removeChild(e)}function wo(e,t,r){var n,o,i,s={};for(i in t)i=="key"?n=t[i]:i=="ref"?o=t[i]:s[i]=t[i];if(arguments.length>2&&(s.children=arguments.length>3?nr.call(arguments,2):r),typeof e=="function"&&e.defaultProps!=null)for(i in e.defaultProps)s[i]===void 0&&(s[i]=e.defaultProps[i]);return ir(e,s,n,o,null)}function ir(e,t,r,n,o){var i={type:e,props:t,key:r,ref:n,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:o==null?++Sc:o};return o==null&&_.vnode!=null&&_.vnode(i),i}function ge(e){return e.children}function fe(e,t){this.props=e,this.context=t}function ut(e,t){if(t==null)return e.__?ut(e.__,e.__.__k.indexOf(e)+1):null;for(var r;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null)return r.__d||r.__e;return typeof e.type=="function"?ut(e):null}function Ic(e){var t,r;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if((r=e.__k[t])!=null&&r.__e!=null){e.__e=e.__c.base=r.__e;break}return Ic(e)}}function Rc(e){(!e.__d&&(e.__d=!0)&&Ee.push(e)&&!sr.__r++||xc!==_.debounceRendering)&&((xc=_.debounceRendering)||Ec)(sr)}function sr(){var e,t,r,n,o,i,s,a,l;for(Ee.sort(yo);e=Ee.shift();)e.__d&&(t=Ee.length,n=void 0,o=void 0,i=void 0,a=(s=(r=e).__v).__e,(l=r.__P)&&(n=[],o=[],(i=ve({},s)).__v=s.__v+1,ko(l,s,i,r.__n,l.ownerSVGElement!==void 0,s.__h!=null?[a]:null,n,a==null?ut(s):a,s.__h,o),Lc(n,s,o),s.__e!=a&&Ic(s)),Ee.length>t&&Ee.sort(yo));sr.__r=0}function Pc(e,t,r,n,o,i,s,a,l,f,p){var c,d,g,u,v,w,b,y,S,x=0,$=n&&n.__k||Tc,T=$.length,R=T,V=t.length;for(r.__k=[],c=0;c<V;c++)(u=r.__k[c]=(u=t[c])==null||typeof u=="boolean"||typeof u=="function"?null:typeof u=="string"||typeof u=="number"||typeof u=="bigint"?ir(null,u,null,null,u):or(u)?ir(ge,{children:u},null,null,null):u.__b>0?ir(u.type,u.props,u.key,u.ref?u.ref:null,u.__v):u)!=null?(u.__=r,u.__b=r.__b+1,(y=vy(u,$,b=c+x,R))===-1?g=Ue:(g=$[y]||Ue,$[y]=void 0,R--),ko(e,u,g,o,i,s,a,l,f,p),v=u.__e,(d=u.ref)&&g.ref!=d&&(g.ref&&$o(g.ref,null,u),p.push(d,u.__c||v,u)),v!=null&&(w==null&&(w=v),(S=g===Ue||g.__v===null)?y==-1&&x--:y!==b&&(y===b+1?x++:y>b?R>V-b?x+=y-b:x--:x=y<b&&y==b-1?y-b:0),b=c+x,typeof u.type!="function"||y===b&&g.__k!==u.__k?typeof u.type=="function"||y===b&&!S?u.__d!==void 0?(l=u.__d,u.__d=void 0):l=v.nextSibling:l=Mc(e,v,l):l=Ac(u,l,e),typeof r.type=="function"&&(r.__d=l))):(g=$[c])&&g.key==null&&g.__e&&(g.__e==l&&(g.__=n,l=ut(g)),Co(g,g,!1),$[c]=null);for(r.__e=w,c=T;c--;)$[c]!=null&&(typeof r.type=="function"&&$[c].__e!=null&&$[c].__e==r.__d&&(r.__d=$[c].__e.nextSibling),Co($[c],$[c]))}function Ac(e,t,r){for(var n,o=e.__k,i=0;o&&i<o.length;i++)(n=o[i])&&(n.__=e,t=typeof n.type=="function"?Ac(n,t,r):Mc(r,n.__e,t));return t}function ar(e,t){return t=t||[],e==null||typeof e=="boolean"||(or(e)?e.some(function(r){ar(r,t)}):t.push(e)),t}function Mc(e,t,r){return r==null||r.parentNode!==e?e.insertBefore(t,null):t==r&&t.parentNode!=null||e.insertBefore(t,r),t.nextSibling}function vy(e,t,r,n){var o=e.key,i=e.type,s=r-1,a=r+1,l=t[r];if(l===null||l&&o==l.key&&i===l.type)return r;if(n>(l!=null?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&o==l.key&&i===l.type)return s;s--}if(a<t.length){if((l=t[a])&&o==l.key&&i===l.type)return a;a++}}return-1}function gy(e,t,r,n,o){var i;for(i in r)i==="children"||i==="key"||i in t||cr(e,i,null,r[i],n);for(i in t)o&&typeof t[i]!="function"||i==="children"||i==="key"||i==="value"||i==="checked"||r[i]===t[i]||cr(e,i,t[i],r[i],n)}function Nc(e,t,r){t[0]==="-"?e.setProperty(t,r==null?"":r):e[t]=r==null?"":typeof r!="number"||hy.test(t)?r:r+"px"}function cr(e,t,r,n,o){var i;e:if(t==="style")if(typeof r=="string")e.style.cssText=r;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(t in n)r&&t in r||Nc(e.style,t,"");if(r)for(t in r)n&&r[t]===n[t]||Nc(e.style,t,r[t])}else if(t[0]==="o"&&t[1]==="n")i=t!==(t=t.replace(/(PointerCapture)$|Capture$/,"$1")),t=t.toLowerCase()in e?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+i]=r,r?n?r.u=n.u:(r.u=Date.now(),e.addEventListener(t,i?Fc:Bc,i)):e.removeEventListener(t,i?Fc:Bc,i);else if(t!=="dangerouslySetInnerHTML"){if(o)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(t!=="width"&&t!=="height"&&t!=="href"&&t!=="list"&&t!=="form"&&t!=="tabIndex"&&t!=="download"&&t!=="rowSpan"&&t!=="colSpan"&&t!=="role"&&t in e)try{e[t]=r==null?"":r;break e}catch(s){}typeof r=="function"||(r==null||r===!1&&t[4]!=="-"?e.removeAttribute(t):e.setAttribute(t,r))}}function Bc(e){var t=this.l[e.type+!1];if(e.t){if(e.t<=t.u)return}else e.t=Date.now();return t(_.event?_.event(e):e)}function Fc(e){return this.l[e.type+!0](_.event?_.event(e):e)}function ko(e,t,r,n,o,i,s,a,l,f){var p,c,d,g,u,v,w,b,y,S,x,$,T,R,V,k=t.type;if(t.constructor!==void 0)return null;r.__h!=null&&(l=r.__h,a=t.__e=r.__e,t.__h=null,i=[a]),(p=_.__b)&&p(t);e:if(typeof k=="function")try{if(b=t.props,y=(p=k.contextType)&&n[p.__c],S=p?y?y.props.value:p.__:n,r.__c?w=(c=t.__c=r.__c).__=c.__E:("prototype"in k&&k.prototype.render?t.__c=c=new k(b,S):(t.__c=c=new fe(b,S),c.constructor=k,c.render=by),y&&y.sub(c),c.props=b,c.state||(c.state={}),c.context=S,c.__n=n,d=c.__d=!0,c.__h=[],c._sb=[]),c.__s==null&&(c.__s=c.state),k.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=ve({},c.__s)),ve(c.__s,k.getDerivedStateFromProps(b,c.__s))),g=c.props,u=c.state,c.__v=t,d)k.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(k.getDerivedStateFromProps==null&&b!==g&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(b,S),!c.__e&&(c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(b,c.__s,S)===!1||t.__v===r.__v)){for(t.__v!==r.__v&&(c.props=b,c.state=c.__s,c.__d=!1),t.__e=r.__e,t.__k=r.__k,t.__k.forEach(function(ie){ie&&(ie.__=t)}),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[],c.__h.length&&s.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(b,c.__s,S),c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(g,u,v)})}if(c.context=S,c.props=b,c.__P=e,c.__e=!1,$=_.__r,T=0,"prototype"in k&&k.prototype.render){for(c.state=c.__s,c.__d=!1,$&&$(t),p=c.render(c.props,c.state,c.context),R=0;R<c._sb.length;R++)c.__h.push(c._sb[R]);c._sb=[]}else do c.__d=!1,$&&$(t),p=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++T<25);c.state=c.__s,c.getChildContext!=null&&(n=ve(ve({},n),c.getChildContext())),d||c.getSnapshotBeforeUpdate==null||(v=c.getSnapshotBeforeUpdate(g,u)),Pc(e,or(V=p!=null&&p.type===ge&&p.key==null?p.props.children:p)?V:[V],t,r,n,o,i,s,a,l,f),c.base=t.__e,t.__h=null,c.__h.length&&s.push(c),w&&(c.__E=c.__=null)}catch(ie){t.__v=null,(l||i!=null)&&(t.__e=a,t.__h=!!l,i[i.indexOf(a)]=null),_.__e(ie,t,r)}else i==null&&t.__v===r.__v?(t.__k=r.__k,t.__e=r.__e):t.__e=my(r.__e,t,r,n,o,i,s,l,f);(p=_.diffed)&&p(t)}function Lc(e,t,r){for(var n=0;n<r.length;n++)$o(r[n],r[++n],r[++n]);_.__c&&_.__c(t,e),e.some(function(o){try{e=o.__h,o.__h=[],e.some(function(i){i.call(o)})}catch(i){_.__e(i,o.__v)}})}function my(e,t,r,n,o,i,s,a,l){var f,p,c,d=r.props,g=t.props,u=t.type,v=0;if(u==="svg"&&(o=!0),i!=null){for(;v<i.length;v++)if((f=i[v])&&"setAttribute"in f==!!u&&(u?f.localName===u:f.nodeType===3)){e=f,i[v]=null;break}}if(e==null){if(u===null)return document.createTextNode(g);e=o?document.createElementNS("http://www.w3.org/2000/svg",u):document.createElement(u,g.is&&g),i=null,a=!1}if(u===null)d===g||a&&e.data===g||(e.data=g);else{if(i=i&&nr.call(e.childNodes),p=(d=r.props||Ue).dangerouslySetInnerHTML,c=g.dangerouslySetInnerHTML,!a){if(i!=null)for(d={},v=0;v<e.attributes.length;v++)d[e.attributes[v].name]=e.attributes[v].value;(c||p)&&(c&&(p&&c.__html==p.__html||c.__html===e.innerHTML)||(e.innerHTML=c&&c.__html||""))}if(gy(e,g,d,o,a),c)t.__k=[];else if(Pc(e,or(v=t.props.children)?v:[v],t,r,n,o&&u!=="foreignObject",i,s,i?i[0]:r.__k&&ut(r,0),a,l),i!=null)for(v=i.length;v--;)i[v]!=null&&Oc(i[v]);a||("value"in g&&(v=g.value)!==void 0&&(v!==e.value||u==="progress"&&!v||u==="option"&&v!==d.value)&&cr(e,"value",v,d.value,!1),"checked"in g&&(v=g.checked)!==void 0&&v!==e.checked&&cr(e,"checked",v,d.checked,!1))}return e}function $o(e,t,r){try{typeof e=="function"?e(t):e.current=t}catch(n){_.__e(n,r)}}function Co(e,t,r){var n,o;if(_.unmount&&_.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||$o(n,null,t)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(i){_.__e(i,t)}n.base=n.__P=null,e.__c=void 0}if(n=e.__k)for(o=0;o<n.length;o++)n[o]&&Co(n[o],t,r||typeof e.type!="function");r||e.__e==null||Oc(e.__e),e.__=e.__e=e.__d=void 0}function by(e,t,r){return this.constructor(e,r)}function _y(e,t,r){var n,o,i,s;_.__&&_.__(e,t),o=(n=typeof r=="function")?null:r&&r.__k||t.__k,i=[],s=[],ko(t,e=(!n&&r||t).__k=wo(ge,null,[e]),o||Ue,Ue,t.ownerSVGElement!==void 0,!n&&r?[r]:o?null:t.firstChild?nr.call(t.childNodes):null,i,!n&&r?r:o?o.__e:t.firstChild,n,s),Lc(i,e,s)}nr=Tc.slice,_={__e:function(e,t,r,n){for(var o,i,s;t=t.__;)if((o=t.__c)&&!o.__)try{if((i=o.constructor)&&i.getDerivedStateFromError!=null&&(o.setState(i.getDerivedStateFromError(e)),s=o.__d),o.componentDidCatch!=null&&(o.componentDidCatch(e,n||{}),s=o.__d),s)return o.__E=o}catch(a){e=a}throw e}},Sc=0,fe.prototype.setState=function(e,t){var r;r=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=ve({},this.state),typeof e=="function"&&(e=e(ve({},r),this.props)),e&&ve(r,e),e!=null&&this.__v&&(t&&this._sb.push(t),Rc(this))},fe.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),Rc(this))},fe.prototype.render=ge,Ee=[],Ec=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,yo=function(e,t){return e.__v.__b-t.__v.__b},sr.__r=0;var Ve,E,So,jc,lr=0,Dc=[],ur=[],Uc=_.__b,Vc=_.__r,Hc=_.diffed,qc=_.__c,Wc=_.unmount;function fr(e,t){_.__h&&_.__h(E,e,lr||t),lr=0;var r=E.__H||(E.__H={__:[],__h:[]});return e>=r.__.length&&r.__.push({__V:ur}),r.__[e]}function A(e){return lr=1,yy(Kc,e)}function yy(e,t,r){var n=fr(Ve++,2);if(n.t=e,!n.__c&&(n.__=[r?r(t):Kc(void 0,t),function(a){var l=n.__N?n.__N[0]:n.__[0],f=n.t(l,a);l!==f&&(n.__N=[f,n.__[1]],n.__c.setState({}))}],n.__c=E,!E.u)){var o=function(a,l,f){if(!n.__c.__H)return!0;var p=n.__c.__H.__.filter(function(d){return d.__c});if(p.every(function(d){return!d.__N}))return!i||i.call(this,a,l,f);var c=!1;return p.forEach(function(d){if(d.__N){var g=d.__[0];d.__=d.__N,d.__N=void 0,g!==d.__[0]&&(c=!0)}}),!(!c&&n.__c.props===a)&&(!i||i.call(this,a,l,f))};E.u=!0;var i=E.shouldComponentUpdate,s=E.componentWillUpdate;E.componentWillUpdate=function(a,l,f){if(this.__e){var p=i;i=void 0,o(a,l,f),i=p}s&&s.call(this,a,l,f)},E.shouldComponentUpdate=o}return n.__N||n.__}function X(e,t){var r=fr(Ve++,3);!_.__s&&Eo(r.__H,t)&&(r.__=e,r.i=t,E.__H.__h.push(r))}function zc(e,t){var r=fr(Ve++,4);!_.__s&&Eo(r.__H,t)&&(r.__=e,r.i=t,E.__h.push(r))}function wy(e){return lr=5,ky(function(){return{current:e}},[])}function ky(e,t){var r=fr(Ve++,7);return Eo(r.__H,t)?(r.__V=e(),r.i=t,r.__h=e,r.__V):r.__}function $y(){for(var e;e=Dc.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(pr),e.__H.__h.forEach(xo),e.__H.__h=[]}catch(t){e.__H.__h=[],_.__e(t,e.__v)}}_.__b=function(e){E=null,Uc&&Uc(e)},_.__r=function(e){Vc&&Vc(e),Ve=0;var t=(E=e.__c).__H;t&&(So===E?(t.__h=[],E.__h=[],t.__.forEach(function(r){r.__N&&(r.__=r.__N),r.__V=ur,r.__N=r.i=void 0})):(t.__h.forEach(pr),t.__h.forEach(xo),t.__h=[],Ve=0)),So=E},_.diffed=function(e){Hc&&Hc(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(Dc.push(t)!==1&&jc===_.requestAnimationFrame||((jc=_.requestAnimationFrame)||Cy)($y)),t.__H.__.forEach(function(r){r.i&&(r.__H=r.i),r.__V!==ur&&(r.__=r.__V),r.i=void 0,r.__V=ur})),So=E=null},_.__c=function(e,t){t.some(function(r){try{r.__h.forEach(pr),r.__h=r.__h.filter(function(n){return!n.__||xo(n)})}catch(n){t.some(function(o){o.__h&&(o.__h=[])}),t=[],_.__e(n,r.__v)}}),qc&&qc(e,t)},_.unmount=function(e){Wc&&Wc(e);var t,r=e.__c;r&&r.__H&&(r.__H.__.forEach(function(n){try{pr(n)}catch(o){t=o}}),r.__H=void 0,t&&_.__e(t,r.__v))};var Gc=typeof requestAnimationFrame=="function";function Cy(e){var t,r=function(){clearTimeout(n),Gc&&cancelAnimationFrame(t),setTimeout(e)},n=setTimeout(r,100);Gc&&(t=requestAnimationFrame(r))}function pr(e){var t=E,r=e.__c;typeof r=="function"&&(e.__c=void 0,r()),E=t}function xo(e){var t=E;e.__c=e.__(),E=t}function Eo(e,t){return!e||e.length!==t.length||t.some(function(r,n){return r!==e[n]})}function Kc(e,t){return typeof t=="function"?t(e):t}function Sy(e,t){for(var r in t)e[r]=t[r];return e}function Yc(e,t){for(var r in e)if(r!=="__source"&&!(r in t))return!0;for(var n in t)if(n!=="__source"&&e[n]!==t[n])return!0;return!1}function Xc(e){this.props=e}(Xc.prototype=new fe).isPureReactComponent=!0,Xc.prototype.shouldComponentUpdate=function(e,t){return Yc(this.props,e)||Yc(this.state,t)};var Jc=_.__b;_.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Jc&&Jc(e)};var xy=_.__e;_.__e=function(e,t,r,n){if(e.then){for(var o,i=t;i=i.__;)if((o=i.__c)&&o.__c)return t.__e==null&&(t.__e=r.__e,t.__k=r.__k),o.__c(e,t)}xy(e,t,r,n)};var Zc=_.unmount;function Qc(e,t,r){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach(function(n){typeof n.__c=="function"&&n.__c()}),e.__c.__H=null),(e=Sy({},e)).__c!=null&&(e.__c.__P===r&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map(function(n){return Qc(n,t,r)})),e}function el(e,t,r){return e&&r&&(e.__v=null,e.__k=e.__k&&e.__k.map(function(n){return el(n,t,r)}),e.__c&&e.__c.__P===t&&(e.__e&&r.insertBefore(e.__e,e.__d),e.__c.__e=!0,e.__c.__P=r)),e}function To(){this.__u=0,this.t=null,this.__b=null}function tl(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function dr(){this.u=null,this.o=null}_.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&e.__h===!0&&(e.type=null),Zc&&Zc(e)},(To.prototype=new fe).__c=function(e,t){var r=t.__c,n=this;n.t==null&&(n.t=[]),n.t.push(r);var o=tl(n.__v),i=!1,s=function(){i||(i=!0,r.__R=null,o?o(a):a())};r.__R=s;var a=function(){if(!--n.__u){if(n.state.__a){var f=n.state.__a;n.__v.__k[0]=el(f,f.__c.__P,f.__c.__O)}var p;for(n.setState({__a:n.__b=null});p=n.t.pop();)p.forceUpdate()}},l=t.__h===!0;n.__u++||l||n.setState({__a:n.__b=n.__v.__k[0]}),e.then(s,s)},To.prototype.componentWillUnmount=function(){this.t=[]},To.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),n=this.__v.__k[0].__c;this.__v.__k[0]=Qc(this.__b,r,n.__O=n.__P)}this.__b=null}var o=t.__a&&wo(ge,null,e.fallback);return o&&(o.__h=null),[wo(ge,null,t.__a?null:e.children),o]};var rl=function(e,t,r){if(++r[1]===r[0]&&e.o.delete(t),e.props.revealOrder&&(e.props.revealOrder[0]!=="t"||!e.o.size))for(r=e.u;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;e.u=r=r[2]}};(dr.prototype=new fe).__a=function(e){var t=this,r=tl(t.__v),n=t.o.get(e);return n[0]++,function(o){var i=function(){t.props.revealOrder?(n.push(o),rl(t,e,n)):o()};r?r(i):i()}},dr.prototype.render=function(e){this.u=null,this.o=new Map;var t=ar(e.children);e.revealOrder&&e.revealOrder[0]==="b"&&t.reverse();for(var r=t.length;r--;)this.o.set(t[r],this.u=[1,0,this.u]);return e.children},dr.prototype.componentDidUpdate=dr.prototype.componentDidMount=function(){var e=this;this.o.forEach(function(t,r){rl(e,r,t)})};var Ey=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Ty=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Oy=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Iy=/[A-Z0-9]/g,Ry=typeof document<"u",Py=function(e){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(e)};function hr(e,t,r){return t.__k==null&&(t.textContent=""),_y(e,t),typeof r=="function"&&r(),e?e.__c:null}fe.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(e){Object.defineProperty(fe.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})});var nl=_.event;function Ay(){}function My(){return this.cancelBubble}function Ny(){return this.defaultPrevented}_.event=function(e){return nl&&(e=nl(e)),e.persist=Ay,e.isPropagationStopped=My,e.isDefaultPrevented=Ny,e.nativeEvent=e};var By={enumerable:!1,configurable:!0,get:function(){return this.class}},ol=_.vnode;_.vnode=function(e){typeof e.type=="string"&&function(t){var r=t.props,n=t.type,o={};for(var i in r){var s=r[i];if(!(i==="value"&&"defaultValue"in r&&s==null||Ry&&i==="children"&&n==="noscript"||i==="class"||i==="className")){var a=i.toLowerCase();i==="defaultValue"&&"value"in r&&r.value==null?i="value":i==="download"&&s===!0?s="":a==="ondoubleclick"?i="ondblclick":a!=="onchange"||n!=="input"&&n!=="textarea"||Py(r.type)?a==="onfocus"?i="onfocusin":a==="onblur"?i="onfocusout":Oy.test(i)?i=a:n.indexOf("-")===-1&&Ty.test(i)?i=i.replace(Iy,"-$&").toLowerCase():s===null&&(s=void 0):a=i="oninput",a==="oninput"&&o[i=a]&&(i="oninputCapture"),o[i]=s}}n=="select"&&o.multiple&&Array.isArray(o.value)&&(o.value=ar(r.children).forEach(function(l){l.props.selected=o.value.indexOf(l.props.value)!=-1})),n=="select"&&o.defaultValue!=null&&(o.value=ar(r.children).forEach(function(l){l.props.selected=o.multiple?o.defaultValue.indexOf(l.props.value)!=-1:o.defaultValue==l.props.value})),r.class&&!r.className?(o.class=r.class,Object.defineProperty(o,"className",By)):(r.className&&!r.class||r.class&&r.className)&&(o.class=o.className=r.className),t.props=o}(e),e.$$typeof=Ey,ol&&ol(e)};var il=_.__r;_.__r=function(e){il&&il(e),e.__c};var sl=_.diffed;_.diffed=function(e){sl&&sl(e);var t=e.props,r=e.__e;r!=null&&e.type==="textarea"&&"value"in t&&t.value!==r.value&&(r.value=t.value==null?"":t.value)};const k0="",Oo=(e,t)=>{const{duration:r=.5,x:n=0,y:o=0}=t||{},[i,s]=A(null),[a,l]=A({});return zc(()=>{const f=c=>{const d={};return c&&(d.transition=`opacity ${r}s ease-in-out, visibility ${r}s ease-in-out, transform ${r}s ease-in-out`),d.opacity="1",d.visibility="visible",n!=0&&(d.transform="translateX(0)"),o!=0&&(d.transform="translateY(0)"),d},p=c=>{const d={};return c&&(d.transition=`opacity ${r}s ease-in-out, visibility ${r}s ease-in-out, transform ${r}s ease-in-out`),d.opacity="0",d.visibility="hidden",n!=0&&(d.transform=`translateX(${n}px)`),o!=0&&(d.transform=`translateY(${o}px)`),d};if(e){const c=f(i!==null);l(c),s("opened")}else{const c=p(i!==null);l(c),s("closed")}},[e]),{style:a}};var al={exports:{}},vr={};function cl(e){function t(o,i,s,a){var l=i?r+o+e.e+i:r+o,f=l;if(s){var p=" "+f+e.m;for(var c in s)if(s.hasOwnProperty(c)){var d=s[c];d===!0?f+=p+c:d&&(f+=p+c+n+d)}}if(a!==void 0)for(var g=0,u=(a=Array.isArray(a)?a:[a]).length;g<u;g++){var v=a[g];if(v&&typeof v.valueOf()=="string")for(var w=v.valueOf().split(" "),b=0;b<w.length;b++){var y=w[b];y!==l&&(f+=" "+y)}}return f}var r=e.n||"",n=e.v||e.m;return function(o,i){return function(s,a,l){return typeof s=="string"?typeof a=="string"||Array.isArray(a)?t(o,s,void 0,a):t(o,s,a,l):t(o,i,s,a)}}}Object.defineProperty(vr,"__esModule",{value:!0});var Fy=cl({e:"-",m:"_"});vr.cn=Fy,vr.withNaming=cl,al.exports=vr;var Ly=al.exports;const B=Ly.withNaming({n:"krkr-",e:"__",m:"--"});var jy=0;function m(e,t,r,n,o,i){var s,a,l={};for(a in t)a=="ref"?s=t[a]:l[a]=t[a];var f={type:e,props:l,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:--jy,__source:o,__self:i};if(typeof e=="function"&&(s=e.defaultProps))for(a in s)l[a]===void 0&&(l[a]=s[a]);return _.vnode&&_.vnode(f),f}const Dy=B("chat"),Uy=B("modern-chat");function Vy({resolveOpen:e,src:t,allow:r,layout:n,isModernString:o,onClickCloseButton:i}){const[s,a]=A(!1);X(()=>{const w=setInterval(()=>{a(e())},100);return()=>{clearInterval(w)}},[e]);const l=o==="true",{type:f="bottom-right",vertical:p=16,horizontal:c=16,width:d=l?376:360,height:g=l?667:540}=n||{},{style:u}=Oo(s,{y:100}),v=l?Uy:Dy;return m("div",{className:v(),style:{...u,left:f==="bottom-left"?c:void 0,right:f==="bottom-right"?c:void 0,bottom:f==="bottom-left"||f==="bottom-right"?p:void 0,width:d,height:g},children:[m("div",{className:v("head"),onClick:i,children:m("svg",{fill:l?"#FFF":"#666",viewBox:"0 0 24 24",width:l?"10":"16",height:l?"10":"16",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),m("iframe",{className:v("body"),src:t,allow:r})]})}const Hy=B("popup-icon-close-button");function ll({type:e,onClick:t}){return m("button",{type:"button",className:Hy({plain:e==="plain",gray:e==="gray"||e===void 0}),onClick:t,children:m("svg",{width:"16",height:"16",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})})}const qy=B("popup-message-close-button");function gr({type:e,onClick:t}){return m("button",{type:"button",className:qy({plain:e==="plain",gray:e==="gray"||e===void 0}),onClick:t,children:m("svg",{width:"12",height:"12",viewBox:"0 0 12 12",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M0.24232 11.7577C0.565412 12.0808 1.09065 12.0808 1.41374 11.7577L6 7.17142L10.5863 11.7577C10.9094 12.0808 11.4346 12.0808 11.7577 11.7577C12.0808 11.4346 12.0808 10.9094 11.7577 10.5863L7.17142 6L11.7577 1.41374C12.0808 1.09065 12.0808 0.565412 11.7577 0.24232C11.4346 -0.0807732 10.9094 -0.0807732 10.5863 0.24232L6 4.82858L1.41374 0.24232C1.09065 -0.0807732 0.565412 -0.0807732 0.24232 0.24232C-0.0807732 0.565412 -0.0807732 1.09065 0.24232 1.41374L4.82858 6L0.24232 10.5863C-0.0807732 10.9094 -0.0807732 11.4346 0.24232 11.7577Z"})})})}const ul=480,fl=()=>{const[e,t]=A(window.innerWidth<=ul);return X(()=>{const r=()=>{t(window.innerWidth<=ul)};return window.addEventListener("resize",r),()=>{window.removeEventListener("resize",r)}},[]),e},Io=B("popup-message-wrapper");function mr({children:e,layout:t,open:r,onClickBackdrop:n}){const{type:o="bottom-right",vertical:i=12,horizontal:s=12,width:a=320,height:l}=t||{},p=fl()||!(o==="bottom-left"||o==="bottom-right"),{style:c}=Oo(r,{y:p?0:100});return m("div",{className:Io(),children:[m("div",{className:Io("wrapper",{center:p}),style:{...c,left:o==="bottom-left"&&!p?s:void 0,right:o==="bottom-right"&&!p?s:void 0,bottom:p?void 0:i,width:a,height:l},children:e}),p&&m("div",{className:Io("backdrop"),onClick:n,style:c})]})}const pe=B("popup-message-button");function Wy({open:e,layout:t,titleText:r,contentText:n,actionButtonLabel:o,closeButtonEnabled:i,closeButtonType:s,onClickActionButton:a,onClickCloseButton:l,onClickBackdrop:f}){return m(mr,{layout:t,open:e,onClickBackdrop:f,children:m("div",{className:pe("dialog"),children:[m("div",{className:pe("title"),children:m("span",{className:pe("title-text"),children:r})}),m("div",{className:pe("content"),children:m("span",{className:pe("content-text"),children:n})}),m("div",{className:pe("action"),children:m("button",{type:"button",className:pe("action-button"),onClick:a,children:m("span",{className:pe("action-button-label"),children:o})})}),i&&s&&m("div",{className:pe("close"),children:m(gr,{type:s,onClick:l})})]})})}const pl=B("popup-message-html");function zy({open:e,layout:t,html:r,closeButtonEnabled:n,closeButtonType:o,onClick:i,onClickCloseButton:s,onClickBackdrop:a}){return m(mr,{layout:t,open:e,onClickBackdrop:a,children:m("div",{className:pl("dialog"),onClick:i,children:[e&&m("div",{dangerouslySetInnerHTML:{__html:r}}),n&&o&&m("div",{className:pl("close"),children:m(gr,{type:o,onClick:s})})]})})}const br=B("popup-message-image");function Gy({open:e,layout:t,image:r,closeButtonEnabled:n,closeButtonType:o,onClick:i,onClickCloseButton:s,onClickBackdrop:a}){return m(mr,{layout:t,open:e,onClickBackdrop:a,children:m("div",{className:br("dialog",{clickable:!!i}),onClick:i,children:[m("div",{className:br("content"),children:m("img",{className:br("content-image"),src:r})}),n&&o&&m("div",{className:br("close"),children:m(gr,{type:o,onClick:s})})]})})}const _r=B("popup-message-text");function Ky({open:e,layout:t,text:r,closeButtonEnabled:n,closeButtonType:o,onClick:i,onClickCloseButton:s,onClickBackdrop:a}){return m(mr,{layout:t,open:e,onClickBackdrop:a,children:m("div",{className:_r("dialog",{clickable:!!i}),onClick:i,children:[m("div",{className:_r("content"),children:m("span",{className:_r("content-text"),children:r})}),n&&o&&m("div",{className:_r("close"),children:m(gr,{type:o,onClick:s})})]})})}const Ro="#00aa78",Yy=new Date().getTime();let dl=0,hl=window.pageYOffset;window.addEventListener("scroll",function(){const e=window.pageYOffset,t=e-hl;dl+=Math.abs(t),hl=e});const Xy=()=>new Date().getTime()-Yy,Jy=()=>dl,Zy=async(e,t)=>xe.get(e+`/api/action/brain/stats/criteria-troubled?url=${t.url}&user_agent=${t.userAgent}&threshold=${t.threshold}`).then(r=>r.data).then(r=>{if(!r.success)throw new Error(r.msg);return r}),Qy=async(e,t)=>xe.get(`${e}/api/action/brain/stats/popular-cards?url=${t.url}`).then(r=>r.data).then(r=>{if(!r.success)throw new Error(r.msg);return r}),e1=async(e,t)=>xe.post(`${e}/api/action/brain/stats/popular-cards-v2`,t).then(r=>r.data).then(r=>{if(!r.success)throw new Error(r.msg);return r}),vl=({endpoint:e,enabled:t,threshold:r,onFired:n})=>{const[o,i]=A(new Date().getTime()),[s,a]=A(!1),[l,f]=A();return X(()=>{!t||e===void 0||r===void 0||Zy(e,{url:location.href,userAgent:navigator.userAgent,threshold:r}).then(p=>{var c;f(((c=p.result)==null?void 0:c.triggers)||[])}).catch(()=>{})},[]),X(()=>{const c=setTimeout(()=>{i(new Date().getTime()),!s&&l&&l.some(d=>d.every(({field:g,value:u})=>g==="scrollY"?Jy()>u:g==="stayingTimeMillSecond"?Xy()>u:!1))&&(a(!0),n==null||n())},300);return()=>{clearInterval(c)}},[o]),{triggerFired:s}};function gl(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=gl(e[t]))&&(n&&(n+=" "),n+=r);else for(t in e)e[t]&&(n&&(n+=" "),n+=t);return n}function ml(){for(var e,t,r=0,n="";r<arguments.length;)(e=arguments[r++])&&(t=gl(e))&&(n&&(n+=" "),n+=t);return n}function t1(e){return m("svg",{width:30,height:30,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:m("path",{d:"M15.0684 0C15.0604 0 15.0443 0 15.0202 0C6.88582 0 0.27063 6.61518 0.27063 14.7495C0.27063 18.0692 1.40397 21.2924 3.47775 23.8886L1.33163 28.8801C1.1548 29.2901 1.34771 29.7643 1.7496 29.9331C1.89429 29.9974 2.05504 30.0135 2.20776 29.9894L10.0769 28.6068C11.6523 29.1775 13.3081 29.4669 14.98 29.4589C23.1143 29.4589 29.7295 22.8437 29.7295 14.7093C29.7456 6.59911 23.1786 0.00803789 15.0684 0ZM10.0206 11.7835H14.3611C14.8031 11.7835 15.1649 12.1452 15.1649 12.5873C15.1649 13.0294 14.8031 13.3911 14.3611 13.3911H10.0206C9.57851 13.3911 9.21681 13.0294 9.21681 12.5873C9.21681 12.1452 9.57851 11.7835 10.0206 11.7835ZM19.9876 17.4101H10.0206C9.57851 17.4101 9.21681 17.0484 9.21681 16.6063C9.21681 16.1642 9.57851 15.8025 10.0206 15.8025H19.9876C20.4297 15.8025 20.7914 16.1642 20.7914 16.6063C20.7914 17.0484 20.4297 17.4101 19.9876 17.4101Z",fill:"currentColor"})})}function r1(e){return m("svg",{width:30,height:30,viewBox:"0 0 30 30",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:m("path",{d:"M15.0683 0C15.0602 0 15.0442 0 15.02 0C6.8857 0 0.270508 6.61518 0.270508 14.7495C0.270508 18.0692 1.40385 21.2924 3.47763 23.8886L1.33151 28.8801C1.15468 29.2901 1.34759 29.7643 1.74948 29.9331C1.89416 29.9974 2.05492 30.0135 2.20764 29.9894L10.0767 28.6068C11.6522 29.1775 13.308 29.4669 14.9799 29.4589C23.1142 29.4589 29.7294 22.8437 29.7294 14.7093C29.7455 6.59911 23.1785 0.00803789 15.0683 0ZM10.0205 11.7835H14.3609C14.803 11.7835 15.1647 12.1452 15.1647 12.5873C15.1647 13.0294 14.803 13.3911 14.3609 13.3911H10.0205C9.57839 13.3911 9.21669 13.0294 9.21669 12.5873C9.21669 12.1452 9.57839 11.7835 10.0205 11.7835ZM19.9875 17.4101H10.0205C9.57839 17.4101 9.21669 17.0484 9.21669 16.6063C9.21669 16.1642 9.57839 15.8025 10.0205 15.8025H19.9875C20.4296 15.8025 20.7913 16.1642 20.7913 16.6063C20.7913 17.0484 20.4296 17.4101 19.9875 17.4101Z",fill:"currentColor"})})}const bl=B("popup-icon-button");function _l({alt:e,shadow:t=!0,draggable:r,color:n=Ro,closeButtonEnabled:o,closeButtonType:i,onClickRemoveButton:s}){const a=l=>{l.stopPropagation(),s()};return m("div",{className:ml(["krkr-button",bl({default:!e,alt:e,shadow:t,draggable:r})]),style:{color:e?n:"#fff",backgroundColor:e?"#fff":n},children:[e?m(t1,{}):m(r1,{}),o&&m("div",{className:bl("close-button"),children:m(ll,{type:i,onClick:a})})]})}const n1=(e,t)=>/\.gif$/.test(e)?e:t?`${e}?w=${t}`:e,o1=(e,t,r)=>!t||!r?`${e} 1x`:[2,3,4].map(n=>{const o=t*n;return o>r?"":`${e}?w=${o} ${n}x`}).filter(n=>!!n).join(","),yl=B("popup-icon-button-image");function wl({circle:e,draggable:t,icon:r,iconWidth:n,iconHeight:o="auto",iconOriginalWidth:i,closeButtonEnabled:s,closeButtonType:a,onClickRemoveButton:l}){const f=p=>{p.stopPropagation(),l()};return m("div",{className:ml(["krkr-button-img",yl({circle:e,draggable:t})]),style:{width:n,height:o},children:[m("img",{src:n1(r,n),srcSet:o1(r,n,i)}),s&&m("div",{className:yl("close-button"),children:m(ll,{type:a,onClick:f})})]})}function i1(){return navigator.userAgent.search(/Android|iPhone|iPad|iPod/i)!==-1}function s1(){return navigator.userAgent.indexOf("Firefox")!==-1}function yr(){return s1()?{width:document.documentElement.clientWidth,height:window.innerHeight}:i1()?{width:window.innerWidth,height:window.innerHeight}:{width:document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}}function a1(e){const[t,r]=A("right");return X(()=>{if(e){const n=yr().width,o=e.getBoundingClientRect().left,i=e.offsetWidth;r(o+i/2>n/2?"right":"left")}}),{direction:t}}function c1(e,t){if(e.closest)return e.closest(t);const r=document.querySelectorAll(t),n=r.length;let o=e.previousElementSibling,i=0;if(typeof t>"u"||t==="")return o;for(;o;){for(i=0;i<n;i++)if(r[i]===o)return o;o=o.previousElementSibling}return null}function l1(e,t,r){const[n,o]=A(!1);return zc(()=>{if(!e||!r)return;let i,s,a,l;const f=t.horizontal,p=t.vertical;function c(u){e&&((Math.abs(a-u.clientX)>5||Math.abs(l-u.clientY)>5)&&(e.dataset.dragging="true",o(!0)),e.style.right=i+a-u.clientX+"px",e.style.bottom=s+l-u.clientY+"px")}function d(u){if(!e)return;const v=u.touches[0];(Math.abs(a-v.pageX)>5||Math.abs(l-v.pageY)>5)&&(e.dataset.dragging="true",o(!0)),e.style.right=i+a-v.pageX+"px",e.style.bottom=s+l-v.pageY+"px"}function g(){if(!e)return;const u=4;let v=4,w=1;const b=1;let y=1,S=0;const x=yr(),$=x.width,T=x.height,R=e.offsetWidth,V=e.offsetHeight,k=e.offsetLeft,ie=e.offsetTop,be=$/2-R/2,H=$-f-R,pt=T-p-V;let M=$-k-R,se=T-ie-V;(k<be&&k>f||k>H)&&(w=-1),ie>pt?S=-1:ie<p&&(S=1);const dt=function(){v=v+u,w===1?(M=M-v,M>f&&M<be||M>H?(e.style.right=M+"px",requestAnimationFrame(dt)):M<be?e.style.right=f+"px":(e.style.left=f+"px",e.style.right="auto")):(M=M+v,M<H&&M>be||M<f?(e.style.right=M+"px",requestAnimationFrame(dt)):M<be?e.style.right=f+"px":(e.style.left=f+"px",e.style.right="auto"))},ze=function(){y=y+b,S===1?(se=se-y,se>pt?(e.style.bottom=se+"px",requestAnimationFrame(ze)):(e.style.top=p+"px",e.style.bottom="auto")):(se=se+y,se<p?(e.style.bottom=se+"px",requestAnimationFrame(ze)):e.style.bottom=p+"px")};requestAnimationFrame(dt),S!==0&&requestAnimationFrame(ze)}e.addEventListener("mousedown",function(u){u.preventDefault();const v=yr();i=v.width-e.offsetLeft-e.offsetWidth,s=v.height-e.offsetTop-e.offsetHeight,a=u.clientX,l=u.clientY,e.style.left="",e.style.top="",e.style.right=i+"px",e.style.bottom=s+"px";const w=y=>{e.dataset.dragging==="true"&&y.stopPropagation(),document.removeEventListener("click",w,!0)},b=function(){document.addEventListener("click",w,!0),document.removeEventListener("mousemove",c,!1),document.removeEventListener("mouseup",b,!1),requestAnimationFrame(function(){e.dataset.dragging="false",o(!1)}),g()};document.addEventListener("mousemove",c,!1),document.addEventListener("mouseup",b,!1)}),e.addEventListener("touchstart",function(u){if(c1(u.target,"button"))return;u.preventDefault();const v=yr();i=v.width-e.offsetLeft-e.offsetWidth,s=v.height-e.offsetTop-e.offsetHeight;const w=u.touches;a=w[0].pageX,l=w[0].pageY,e.style.left="",e.style.top="",e.style.right=i+"px",e.style.bottom=s+"px";const b=function(){e.removeEventListener("touchmove",d,!1),e.removeEventListener("touchend",b,!1),e.dataset.dragging==="true"&&g(),e.click(),e.dataset.dragging="false",o(!1)};e.addEventListener("touchmove",d,!1),e.addEventListener("touchend",b,!1)},!1)},[e,r]),{dragging:n}}const u1=B("popup-icon-wrapper");function kl({open:e,layout:t,draggable:r,onClick:n,render:o}){const{type:i="bottom-right",vertical:s=12,horizontal:a=12,width:l,height:f}=t||{},p=wy(null),{style:c}=Oo(e,{duration:.2}),{direction:d}=a1(p.current),{dragging:g}=l1(p.current,{vertical:s,horizontal:a},r),u=()=>{n&&!g&&n()};return m("div",{className:u1(),style:{...c,left:i==="bottom-left"?a:void 0,right:i==="bottom-right"?a:void 0,bottom:i==="bottom-left"||i==="bottom-right"?s:void 0,width:l,height:f},ref:p,onClick:u,children:o(d)})}function f1({open:e,layout:t,color:r=Ro,icon:n,iconWidth:o,iconOriginalWidth:i,iconDraggable:s,balloonAiTrigger:a,balloonAiTriggerThreshold:l,closeButtonEnabled:f,closeButtonType:p,onClick:c,onClickRemoveButton:d,onAiTriggerFired:g,endpoint:u}){return vl({endpoint:u,enabled:a,threshold:l,onFired:g}),m(kl,{open:e,layout:t,draggable:s,onClick:c,render:()=>n&&o?m(wl,{draggable:s,icon:n,iconWidth:o,iconOriginalWidth:i,closeButtonEnabled:f,closeButtonType:p,onClickRemoveButton:d}):m(_l,{color:r,draggable:s,closeButtonEnabled:f,closeButtonType:p,onClickRemoveButton:d})})}const p1=({enabled:e,waitSecond:t})=>{const[r,n]=A(!1);return X(()=>{if(!e||t===void 0)return;const o=setTimeout(()=>{n(!0)},t*1e3);return()=>{clearTimeout(o)}},[e,t]),{triggerFired:r}},d1=B("popup-icon-balloon-close-button");function h1({type:e,onClick:t}){return m("button",{type:"button",className:d1({plain:e==="plain",gray:e==="gray"||e===void 0}),onClick:t,children:m("svg",{width:"16",height:"16",viewBox:"0 0 16 16",xmlns:"http://www.w3.org/2000/svg",children:m("path",{d:"M10.946 10.0033C11.2066 10.2641 11.2066 10.6853 10.946 10.9461C10.8159 11.0761 10.6453 11.1414 10.4745 11.1414C10.3039 11.1414 10.1332 11.0761 10.0032 10.9461L7.99991 8.94266L5.99661 10.9461C5.86661 11.0761 5.69595 11.1414 5.5253 11.1414C5.35452 11.1414 5.18387 11.0761 5.05386 10.9461C4.79324 10.6853 4.79324 10.2641 5.05386 10.0033L7.05728 8.00003L5.05386 5.99673C4.79324 5.73599 4.79324 5.31473 5.05386 5.05399C5.31461 4.79337 5.73587 4.79337 5.99661 5.05399L7.99991 7.0574L10.0032 5.05399C10.2639 4.79337 10.6852 4.79337 10.946 5.05399C11.2066 5.31473 11.2066 5.73599 10.946 5.99673L8.94254 8.00003L10.946 10.0033Z"})})})}const v1=B("popup-icon-balloon-message");function g1({color:e,text:t,delay:r}){const[n,o]=A(!0);return X(()=>{r&&(o(!1),setTimeout(()=>{t&&o(!0)},r))},[t]),n?m("p",{className:v1({long:t&&t.length>25,"xl-long":t&&t.length>30}),style:{color:e,width:"max-content"},children:t}):null}const m1=({balloonType:e,balloonMessages:t,balloonMessageIntervalSecond:r,endpoint:n,usePopularCardV2:o})=>{const[i,s]=A(0),[a,l]=A(!1),[f,p]=A([]),[c,d]=A(!0),[g,u]=A();return X(()=>{if(e!=="none"){if(e==="message-ai-suggest"&&n)if(o){e1(n,{pageviews:_1()}).then(v=>{v!=null&&v.result&&v.result.length>0?(p(v.result.map(w=>w.greeting_message)),u("message-ai-suggest")):t&&(p(t),u("message-ai-suggest:fallback"))}).catch(()=>{t&&(p(t),u("message-ai-suggest:fallback"))});return}else{Qy(n,{url:window.location.href}).then(v=>{v!=null&&v.result&&v.result.length>0?(p(v.result.map(w=>w.greeting_message)),u("message-ai-suggest")):t&&(p(t),u("message-ai-suggest:fallback"))}).catch(()=>{t&&(p(t),u("message-ai-suggest:fallback"))});return}if(e==="message"&&t){p(t),u("message");return}}},[e,t]),X(()=>{e!=="none"&&(!f||f.length===0||c&&(l(!0),d(!1)))},[e,f]),X(()=>{if(e!=="none"&&!(!f||f.length===0||f.length===1)&&!c)if(a){const v=setTimeout(()=>{l(!1)},r*1e3);return()=>{clearTimeout(v)}}else{const v=setTimeout(()=>{l(!0),s((i+1)%f.length)},2e3);return()=>{clearTimeout(v)}}},[e,f,i,a]),{displayMessage:a,messageText:f[i],messageIndex:i,messageType:g}};function b1(){try{if(!localStorage)return[];const e=localStorage.getItem("krkr");return e?JSON.parse(e).pageviewInfo||[]:[]}catch(e){return[]}}function _1(){try{const e={timestamp:new Date().toISOString(),url:window.location.href,page_title:document.title,num_click:0,scroll_y_cumulative:0,staying_time_mill_second:0,user_agent:navigator.userAgent};return[...b1(),e]}catch(e){return[]}}const Po=B("popup-v2");function y1(e){const{open:t,layout:r,color:n=Ro,icon:o,iconOriginalWidth:i,iconDraggable:s,iconAltImage:a,balloonType:l,balloonMessages:f,balloonMessageIntervalSecond:p=10,balloonAlways:c,balloonTimerTrigger:d,balloonTimerTriggerWaitSecond:g,balloonAiTrigger:u,balloonAiTriggerThreshold:v,balloonHideMobile:w,balloonThemedBackground:b,closeButtonEnabled:y,closeButtonType:S,onClick:x,onClickRemoveButton:$,onChangeState:T,onAiTriggerFired:R,endpoint:V,direction:k,usePopularCardV2:ie}=e,be=fl(),[H,pt]=A(!1),{triggerFired:M}=p1({enabled:d,waitSecond:g}),{triggerFired:se}=vl({endpoint:V,enabled:u,threshold:v,onFired:R}),{displayMessage:dt,messageText:ze,messageIndex:y0,messageType:Wl}=m1({balloonType:l,balloonMessages:f,balloonMessageIntervalSecond:p,endpoint:V,usePopularCardV2:ie}),qo=dt?ze:"",zl=se||M,Gl=l!=="none"&&!(w&&be),w0=_e=>{_e.stopPropagation(),pt(!1),T==null||T("close-balloon")};X(()=>{Gl&&(c||zl)&&(pt(!0),T==null||T("open-balloon"))},[l,c,zl,T]);const ht=be?50:60,Kl=l==="none"?ht:ht+20;return m(kl,{open:t,layout:{...r,width:Kl,height:Kl},draggable:s,onClick:()=>x({messageText:H?ze:"",messageIndex:H?y0:-1,messageType:H?Wl:void 0,smartHello:Wl==="message-ai-suggest"}),render:_e=>m(ge,{children:[m("div",{className:Po("icon",{left:(k!=null?k:_e)==="left",right:(k!=null?k:_e)==="right",balloon:l!=="none"}),children:o?m(wl,{circle:!0,draggable:s,icon:o,iconWidth:ht,iconHeight:ht,iconOriginalWidth:i,closeButtonEnabled:y&&!(l!=="none"&&H),closeButtonType:S,onClickRemoveButton:$}):m(_l,{alt:a||H&&b,shadow:!(t&&H),draggable:s,color:n,closeButtonEnabled:y&&!(l!=="none"&&H),closeButtonType:S,onClickRemoveButton:$})}),Gl&&m("div",{className:Po("balloon",{left:(k!=null?k:_e)==="left",right:(k!=null?k:_e)==="right",draggable:s,hide:!(t&&H&&qo)}),style:{backgroundColor:b?n:"#FFF",width:t&&H&&qo?"fit-content":ht},children:[t&&H&&m(g1,{color:b?"#FFF":void 0,text:qo,delay:600}),m("div",{className:Po("balloon-close-button",{left:(k!=null?k:_e)==="left",right:(k!=null?k:_e)==="right"}),children:m(h1,{type:S,onClick:w0})})]})]})})}class Ao{constructor(t){this.trigger=t}shouldFire(){try{const t=this.resolveCompareValue();return this.resolveOperator().test(t)}catch(t){return!1}}}class He{}class Mo extends He{constructor(t){super(),this.options=t}test(t){if(!this.options.value||t===null)return!1;const r=t.endsWith(this.options.value);return this.options.not?!r:r}}class qe extends He{constructor(t){super(),this.options=t}test(t){if(!this.options.value||t===null)return!1;const r=t===this.options.value;return this.options.not?!r:r}}class $l extends He{constructor(t){super(),this.options=t}test(t){const r=t!==null;return this.options.not?!r:r}}class No extends He{constructor(t){super(),this.options=t}test(t){if(!this.options.value||t===null)return!1;const r=t.includes(this.options.value);return this.options.not?!r:r}}class Bo extends He{constructor(t){super(),this.options=t}test(t){if(!this.options.value||t===null)return!1;const r=t.match(this.options.value)!==null;return this.options.not?!r:r}}class Fo extends He{constructor(t){super(),this.options=t}test(t){if(!this.options.value||t===null)return!1;const r=t.startsWith(this.options.value);return this.options.not?!r:r}}class w1 extends Ao{resolveCompareValue(){var r;if(!this.trigger.name)throw new Error;const t=Cc.find(this.trigger.name);return t?(r=t.value)!=null?r:"":null}resolveOperator(){switch(this.trigger.operator){case"exact":return new qe({not:!1,value:this.trigger.value});case"partial":return new No({not:!1,value:this.trigger.value});case"startsWith":return new Fo({not:!1,value:this.trigger.value});case"endsWith":return new Mo({not:!1,value:this.trigger.value});case"regexp":return new Bo({not:!1,value:this.trigger.value});case"exist":return new $l({not:!1});case"exist:not":return new $l({not:!0});default:return new qe({not:!1,value:this.trigger.value})}}}class k1 extends Ao{resolveCompareValue(){return location.pathname}resolveOperator(){switch(this.trigger.operator){case"exact":return new qe({not:!1,value:this.trigger.value});case"partial":return new No({not:!1,value:this.trigger.value});case"startsWith":return new Fo({not:!1,value:this.trigger.value});case"endsWith":return new Mo({not:!1,value:this.trigger.value});case"regexp":return new Bo({not:!1,value:this.trigger.value});default:return new qe({not:!1,value:this.trigger.value})}}}class $1 extends Ao{resolveCompareValue(){return u_()}resolveOperator(){switch(this.trigger.operator){case"exact":return new qe({not:!1,value:this.trigger.value});case"partial":return new No({not:!1,value:this.trigger.value});case"startsWith":return new Fo({not:!1,value:this.trigger.value});case"endsWith":return new Mo({not:!1,value:this.trigger.value});case"regexp":return new Bo({not:!1,value:this.trigger.value});default:return new qe({not:!1,value:this.trigger.value})}}}function Cl(e,t,r=!1){return e!=null&&e.length?e.some(t):r}function Lo({triggers:e,testCondition:t,allowEmptyTriggers:r=!1}){return Cl(e,n=>("conditions"in n?n.conditions:n).every(t),r)}function jo(e){return Lo({triggers:e,testCondition:C1,allowEmptyTriggers:!0})}function C1(e){switch(e.field){case"custom-event":return new w1(e).shouldFire();default:return!1}}const S1={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},Sl={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},I={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},F={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},me={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class h{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const o=h.getVersionPrecision(t),i=h.getVersionPrecision(r);let s=Math.max(o,i),a=0;const l=h.map([t,r],f=>{const p=s-h.getVersionPrecision(f),c=f+new Array(p+1).join(".0");return h.map(c.split("."),d=>new Array(20-d.length).join("0")+d).reverse()});for(n&&(a=s-Math.min(o,i)),s-=1;s>=a;){if(l[0][s]>l[1][s])return 1;if(l[0][s]===l[1][s]){if(s===a)return 0;s-=1}else if(l[0][s]<l[1][s])return-1}}static map(t,r){const n=[];let o;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(o=0;o<t.length;o+=1)n.push(r(t[o]));return n}static find(t,r){let n,o;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,o=t.length;n<o;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let o,i;if(Object.assign)return Object.assign(t,...r);for(o=0,i=r.length;o<i;o+=1){const s=r[o];typeof s=="object"&&s!==null&&Object.keys(s).forEach(l=>{n[l]=s[l]})}return t}static getBrowserAlias(t){return S1[t]}static getBrowserTypeByAlias(t){return Sl[t]||""}}const C=/version\/(\d+(\.?_?\d+)+)/i,x1=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=h.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=h.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=h.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=h.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=h.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=h.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=h.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=h.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=h.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=h.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=h.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=h.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=h.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=h.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=h.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=h.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=h.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=h.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=h.getFirstMatch(C,e)||h.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=h.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=h.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=h.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=h.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=h.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=h.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=h.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=h.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=h.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=h.getFirstMatch(C,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,o=e.search("\\(")!==-1?r:t;return{name:h.getFirstMatch(o,e),version:h.getSecondMatch(o,e)}}}],E1=[{test:[/Roku\/DVP/],describe(e){const t=h.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:F.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=h.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:F.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=h.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=h.getWindowsVersionName(t);return{name:F.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:F.iOS},r=h.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=h.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=h.getMacOSVersionName(t),n={name:F.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=h.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:F.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=h.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=h.getAndroidVersionName(t),n={name:F.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=h.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:F.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=h.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||h.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||h.getFirstMatch(/\bbb(\d+)/i,e);return{name:F.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=h.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:F.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=h.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:F.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:F.Linux}}},{test:[/CrOS/],describe(){return{name:F.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=h.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:F.PlayStation4,version:t}}}],T1=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=h.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:I.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:I.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:I.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:I.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:I.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:I.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:I.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=h.getFirstMatch(/(ipod|iphone)/i,e);return{type:I.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:I.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:I.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:I.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:I.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:I.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:I.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:I.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:I.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:I.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:I.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:I.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:I.tv}}}],O1=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:me.Blink};const r=h.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:me.EdgeHTML,version:r}}},{test:[/trident/i],describe(e){const t={name:me.Trident},r=h.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:me.Presto},r=h.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:me.Gecko},r=h.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:me.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:me.WebKit},r=h.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class xl{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=h.find(x1,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=h.find(E1,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=h.find(T1,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=h.find(O1,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return h.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const o={};let i=0;if(Object.keys(t).forEach(a=>{const l=t[a];typeof l=="string"?(o[a]=l,i+=1):typeof l=="object"&&(r[a]=l,n+=1)}),n>0){const a=Object.keys(r),l=h.find(a,p=>this.isOS(p));if(l){const p=this.satisfies(r[l]);if(p!==void 0)return p}const f=h.find(a,p=>this.isPlatform(p));if(f){const p=this.satisfies(r[f]);if(p!==void 0)return p}}if(i>0){const a=Object.keys(o),l=h.find(a,f=>this.isBrowser(f,!0));if(l!==void 0)return this.compareVersion(o[l])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let o=t.toLowerCase();const i=h.getBrowserTypeByAlias(o);return r&&i&&(o=i.toLowerCase()),o===n}compareVersion(t){let r=[0],n=t,o=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(o=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(o=!0,n=t.substr(1)),r.indexOf(h.compareVersions(i,n,o))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class I1{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new xl(t,r)}static parse(t){return new xl(t).getResult()}static get BROWSER_MAP(){return Sl}static get ENGINE_MAP(){return me}static get OS_MAP(){return F}static get PLATFORMS_MAP(){return I}}function R1(e){var t,r,n;if(!e||e.allow==="all")return!0;if(e.allow==="specific")switch(I1.parse(navigator.userAgent).platform.type){case"desktop":return!!((t=e.type)!=null&&t.desktop);case"mobile":return!!((r=e.type)!=null&&r.mobile);case"tablet":return!!((n=e.type)!=null&&n.tablet)}return!1}function El({triggers:e,triggerGroups:t,ignoreTriggers:r}){return(Lo({triggers:e,testCondition:Tl,allowEmptyTriggers:!1})||P1(t))&&!Lo({triggers:r,testCondition:Tl})}function P1(e){return Cl(e,El)}function Tl(e){switch(e.field){case"url":return new $1(e).shouldFire();case"path":return new k1(e).shouldFire();default:return!1}}const A1=new Date().getTime();let Ol=0,Il=window.pageYOffset;window.addEventListener("scroll",function(){const e=window.pageYOffset,t=e-Il;Ol+=Math.abs(t),Il=e});const M1=()=>new Date().getTime()-A1,N1=()=>Ol,B1=e=>xe.get(re.VAR_ORIGIN+`/api/action/brain/stats/criteria-troubled?url=${e.url}&user_agent=${e.userAgent}&threshold=${e.threshold}`).then(t=>t.data).then(t=>{if(!t.success)throw new Error(t.msg);return t.result.triggers}),Rl=[];async function F1(e){var r;let t=(r=Rl.find(n=>n.threshold===e))==null?void 0:r.triggers;if(!t){try{t=await B1({url:location.href,userAgent:navigator.userAgent,threshold:e})}catch(n){t=[]}Rl.push({threshold:e,triggers:t})}return t}async function L1(e){if(!e||e.allow==="all")return!0;if(e.allow==="specific"){const t=await F1(e.threshold);return!t||t.length===0?!1:t.some(r=>r.every(({field:n,value:o})=>n==="scrollY"?N1()>o:n==="stayingTimeMillSecond"?M1()>o:!1))}else return!1}function j1(e={},t=["karakuriTracking"]){let r="";e.referrer||(e.referrer=location.href);const n=f_();n&&(e.krkr=n);const o=p_(),i=d_();o&&i&&(e["krkr-s"]=`${o}.${i}`);const s=h_();if(s&&(e["krkr-token"]=s),e)for(const a in e){if(t.some(f=>f===a))continue;const l=e[a];Array.isArray(l)?l.forEach(f=>{r+=(r?"&":"?")+a+"="+encodeURIComponent(f)}):typeof l=="boolean"?l===!0&&(r+=(r?"&":"?")+a):(typeof l=="string"||typeof l=="number")&&(r+=(r?"&":"?")+a+"="+encodeURIComponent(l))}return r}function D1(e){try{return e?JSON.parse(e):{}}catch(t){return{}}}function We(e,t){return new U1(e,t).resolveChatEndpoint()}class U1{constructor(t,r){this.contexts=t,this.options=r}resolveChatEndpoint(){var r,n,o,i,s,a,l,f,p,c;const t={...Ga(),...D1((r=this.contexts)==null?void 0:r.chatbotContexts)};if(((n=this.contexts)==null?void 0:n.chatbotCardType)==="specific"&&this.contexts.chatbotCard&&(t.card=this.contexts.chatbotCard),((o=this.contexts)==null?void 0:o.chatbotCardType)==="specific-by-rule"){const d=this.resolveCardRule(this.contexts.chatbotCardRuleList,this.contexts.chatbotCardRuleDefault);d&&(t.card=d)}if(((i=this.contexts)==null?void 0:i.chatbotTagsType)==="specific"&&this.contexts.chatbotTags&&this.contexts.chatbotTags.length>0&&(t.tags=this.contexts.chatbotTags),((s=this.contexts)==null?void 0:s.chatbotTagsType)==="specific-by-rule"){const d=this.resolveTagsRule(this.contexts.chatbotTagsRuleList,this.contexts.chatbotTagsRuleDefault);d&&d.length>0&&(t.tags=d)}return(a=this.contexts)!=null&&a.chatbotReferrer&&(t.referrer=this.contexts.chatbotReferrer),(l=this.options)!=null&&l.smartHello&&(t.smartHello=(f=this.options)==null?void 0:f.smartHello),(p=this.options)!=null&&p.autoFocus&&(t.autoFocus=(c=this.options)==null?void 0:c.autoFocus),re.VAR_ORIGIN+"/embed/"+j1(t)}resolveCardRule(t,r){if(t)for(let n=0;n<t.length;n++){const{customEventTriggers:o,value:i}=t[n];if(jo(o))return i!=null?i:r}return r}resolveTagsRule(t,r){if(t)for(let n=0;n<t.length;n++){const{customEventTriggers:o,value:i}=t[n];if(jo(o))return i!=null?i:r}return r}}const $0="";class wr{constructor(t,r,n,o){this.contexts=t,this.eventMessage=r,this.onClose=n,this.options=o,this.isOpen=!1,this.element=document.createElement("div"),this.scroll=0,this.open=()=>{setTimeout(()=>{var a;const i=document.documentElement.scrollTop;(a=document.querySelector("html"))==null||a.classList.add("krkr-active");const s=document.documentElement.scrollTop;i!==s&&(this.scroll=i)},500),e_(this.eventMessage),this.isOpen=!0},this.close=()=>{var i;setTimeout(()=>{var s;(s=document.querySelector("html"))==null||s.classList.remove("krkr-active"),this.scroll&&(document.documentElement.scrollTop=this.scroll,this.scroll=0)},0),t_(this.eventMessage),this.isOpen=!1,(i=this.onClose)==null||i.call(this)},this.destroy=()=>{this.element.remove()},this.handleClickCloseButton=()=>{this.close()},document.body.appendChild(this.element),this.render()}render(){var t,r;hr(m(Vy,{resolveOpen:()=>this.isOpen,src:We(this.contexts,this.options),allow:((t=this.contexts)==null?void 0:t.allow)||"geolocation; fullscreen",layout:(r=this.contexts)==null?void 0:r.layout,onClickCloseButton:this.handleClickCloseButton,isModernString:re.VAR_IS_MODERN}),this.element)}}class Pl{constructor(t,r){var n,o;this.contexts=t,this.eventMessage=r,this.isOpen=!1,this.target=document.createElement("div"),this.open=(i=100)=>{setTimeout(()=>{this.isOpen=!0,this.render()},i)},this.close=(i=100)=>{setTimeout(()=>{this.isOpen=!1,this.render()},i)},this.destroy=()=>{this.target.remove()},this.handleClick=()=>{this.isOpen&&(this.contexts.action.type===U.openChatbot?window.open(We(this.contexts.action.contexts)):this.contexts.action.type===U.openUrl?this.contexts.action.newTab?window.open(this.contexts.action.url):location.href=this.contexts.action.url:this.contexts.action.type===U.popupChatbot?(this.popupChatbot||(this.popupChatbot=new wr(this.contexts.action.contexts,this.eventMessage,()=>{this.open()})),this.popupChatbot.open(),this.close()):this.contexts.action.type===U.none?this.close():this.close())},this.handleClickRemoveButton=()=>{qa(this.eventMessage),this.close()},this.handleAiTriggerFired=()=>{Wa(this.eventMessage)},this.target.className=`krkr-${(n=this.eventMessage)==null?void 0:n.serviceId}-${(o=this.eventMessage)==null?void 0:o.actionId}`,document.body.appendChild(this.target),this.render()}render(){var t,r,n,o;hr(m(f1,{open:this.isOpen,layout:this.contexts.layout,color:this.contexts.color,icon:this.contexts.icon,iconWidth:this.contexts.iconWidth,iconOriginalWidth:this.contexts.iconOriginalWidth,iconDraggable:this.contexts.iconDraggable,balloonAiTrigger:this.contexts.balloonAiTrigger,balloonAiTriggerThreshold:this.contexts.balloonAiTriggerThreshold,closeButtonEnabled:(r=(t=this.contexts)==null?void 0:t.closeButton)==null?void 0:r.enabled,closeButtonType:(o=(n=this.contexts)==null?void 0:n.closeButton)==null?void 0:o.type,onClick:this.handleClick,onClickRemoveButton:this.handleClickRemoveButton,onAiTriggerFired:this.handleAiTriggerFired,endpoint:re.VAR_ORIGIN}),this.target)}}function V1(e){const t=e;return!(typeof t.vendor!="string"||t.type!=="create-widget"||t.widget!=="popup-v1"&&t.widget!=="popup-chatbot"||t.chatbotCard!==void 0&&typeof t.chatbotCard!="string")}class Do{static fetchDefault(){if(!this.defaultValue)return xe.get(`${re.VAR_ORIGIN}/api/action/default`).then(t=>{this.defaultValue=t.data})}static async resolvePopupIconV1Contexts(t){var r,n,o,i,s,a,l;return await this.fetchDefault(),{type:De.popupV1,layout:(r=this.defaultValue)==null?void 0:r.layout,color:(n=this.defaultValue)==null?void 0:n.color,icon:(o=this.defaultValue)==null?void 0:o.icon,iconWidth:(i=this.defaultValue)==null?void 0:i.iconWidth,iconOriginalWidth:(s=this.defaultValue)==null?void 0:s.iconOriginalWidth,iconDraggable:(a=this.defaultValue)==null?void 0:a.iconDraggable,balloonAiTrigger:!1,closeButton:{enabled:(l=this.defaultValue)==null?void 0:l.iconRemovable,type:"gray"},action:{type:U.popupChatbot,contexts:this.resolvePopupChatbotContexts(t)}}}static resolvePopupChatbotContexts(t){return{allow:"geolocation 'src'; fullscreen 'src'",chatbotCardType:t.chatbotCard?"specific":"default",chatbotCard:t.chatbotCard}}static async call(t){const{vendor:r,type:n,widget:o}=t;if(n==="create-widget"&&!this.actions.find(i=>i.id===r)){if(o==="popup-v1"){const i=await this.resolvePopupIconV1Contexts(t),s=new Pl(i);s.open(),this.actions.push({id:r,template:s})}if(o==="popup-chatbot"){const i=this.resolvePopupChatbotContexts(t),s=new wr(i);s.open(),this.actions.push({id:r,template:s})}}}}Do.actions=[],Do.defaultValue=void 0;function H1(e){document.readyState==="interactive"||document.readyState==="complete"?e():document.addEventListener("DOMContentLoaded",e,!1)}var q1=function(t,r){if(r=r.split(":")[0],t=+t,!t)return!1;switch(r){case"http":case"ws":return t!==80;case"https":case"wss":return t!==443;case"ftp":return t!==21;case"gopher":return t!==70;case"file":return!1}return t!==0},Uo={},W1=Object.prototype.hasOwnProperty,z1;function Al(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return null}}function Ml(e){try{return encodeURIComponent(e)}catch(t){return null}}function G1(e){for(var t=/([^=?#&]+)=?([^&]*)/g,r={},n;n=t.exec(e);){var o=Al(n[1]),i=Al(n[2]);o===null||i===null||o in r||(r[o]=i)}return r}function K1(e,t){t=t||"";var r=[],n,o;typeof t!="string"&&(t="?");for(o in e)if(W1.call(e,o)){if(n=e[o],!n&&(n===null||n===z1||isNaN(n))&&(n=""),o=Ml(o),n=Ml(n),o===null||n===null)continue;r.push(o+"="+n)}return r.length?t+r.join("&"):""}Uo.stringify=K1,Uo.parse=G1;var Nl=q1,kr=Uo,Y1=/^[\x00-\x20\u00a0\u1680\u2000-\u200a\u2028\u2029\u202f\u205f\u3000\ufeff]+/,Bl=/[\n\r\t]/g,X1=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,Fl=/:\d+$/,J1=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\\/]+)?([\S\s]*)/i,Z1=/^[a-zA-Z]:/;function Vo(e){return(e||"").toString().replace(Y1,"")}var Ho=[["#","hash"],["?","query"],function(t,r){return ne(r.protocol)?t.replace(/\\/g,"/"):t},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d*)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],Ll={hash:1,query:1};function jl(e){var t;typeof window<"u"?t=window:typeof Ge<"u"?t=Ge:typeof self<"u"?t=self:t={};var r=t.location||{};e=e||r;var n={},o=typeof e,i;if(e.protocol==="blob:")n=new oe(unescape(e.pathname),{});else if(o==="string"){n=new oe(e,{});for(i in Ll)delete n[i]}else if(o==="object"){for(i in e)i in Ll||(n[i]=e[i]);n.slashes===void 0&&(n.slashes=X1.test(e.href))}return n}function ne(e){return e==="file:"||e==="ftp:"||e==="http:"||e==="https:"||e==="ws:"||e==="wss:"}function Dl(e,t){e=Vo(e),e=e.replace(Bl,""),t=t||{};var r=J1.exec(e),n=r[1]?r[1].toLowerCase():"",o=!!r[2],i=!!r[3],s=0,a;return o?i?(a=r[2]+r[3]+r[4],s=r[2].length+r[3].length):(a=r[2]+r[4],s=r[2].length):i?(a=r[3]+r[4],s=r[3].length):a=r[4],n==="file:"?s>=2&&(a=a.slice(2)):ne(n)?a=r[4]:n?o&&(a=a.slice(2)):s>=2&&ne(t.protocol)&&(a=r[4]),{protocol:n,slashes:o||ne(n),slashesCount:s,rest:a}}function Q1(e,t){if(e==="")return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],i=!1,s=0;n--;)r[n]==="."?r.splice(n,1):r[n]===".."?(r.splice(n,1),s++):s&&(n===0&&(i=!0),r.splice(n,1),s--);return i&&r.unshift(""),(o==="."||o==="..")&&r.push(""),r.join("/")}function oe(e,t,r){if(e=Vo(e),e=e.replace(Bl,""),!(this instanceof oe))return new oe(e,t,r);var n,o,i,s,a,l,f=Ho.slice(),p=typeof t,c=this,d=0;for(p!=="object"&&p!=="string"&&(r=t,t=null),r&&typeof r!="function"&&(r=kr.parse),t=jl(t),o=Dl(e||"",t),n=!o.protocol&&!o.slashes,c.slashes=o.slashes||n&&t.slashes,c.protocol=o.protocol||t.protocol||"",e=o.rest,(o.protocol==="file:"&&(o.slashesCount!==2||Z1.test(e))||!o.slashes&&(o.protocol||o.slashesCount<2||!ne(c.protocol)))&&(f[3]=[/(.*)/,"pathname"]);d<f.length;d++){if(s=f[d],typeof s=="function"){e=s(e,c);continue}i=s[0],l=s[1],i!==i?c[l]=e:typeof i=="string"?(a=i==="@"?e.lastIndexOf(i):e.indexOf(i),~a&&(typeof s[2]=="number"?(c[l]=e.slice(0,a),e=e.slice(a+s[2])):(c[l]=e.slice(a),e=e.slice(0,a)))):(a=i.exec(e))&&(c[l]=a[1],e=e.slice(0,a.index)),c[l]=c[l]||n&&s[3]&&t[l]||"",s[4]&&(c[l]=c[l].toLowerCase())}r&&(c.query=r(c.query)),n&&t.slashes&&c.pathname.charAt(0)!=="/"&&(c.pathname!==""||t.pathname!=="")&&(c.pathname=Q1(c.pathname,t.pathname)),c.pathname.charAt(0)!=="/"&&ne(c.protocol)&&(c.pathname="/"+c.pathname),Nl(c.port,c.protocol)||(c.host=c.hostname,c.port=""),c.username=c.password="",c.auth&&(a=c.auth.indexOf(":"),~a?(c.username=c.auth.slice(0,a),c.username=encodeURIComponent(decodeURIComponent(c.username)),c.password=c.auth.slice(a+1),c.password=encodeURIComponent(decodeURIComponent(c.password))):c.username=encodeURIComponent(decodeURIComponent(c.auth)),c.auth=c.password?c.username+":"+c.password:c.username),c.origin=c.protocol!=="file:"&&ne(c.protocol)&&c.host?c.protocol+"//"+c.host:"null",c.href=c.toString()}function e0(e,t,r){var n=this;switch(e){case"query":typeof t=="string"&&t.length&&(t=(r||kr.parse)(t)),n[e]=t;break;case"port":n[e]=t,Nl(t,n.protocol)?t&&(n.host=n.hostname+":"+t):(n.host=n.hostname,n[e]="");break;case"hostname":n[e]=t,n.port&&(t+=":"+n.port),n.host=t;break;case"host":n[e]=t,Fl.test(t)?(t=t.split(":"),n.port=t.pop(),n.hostname=t.join(":")):(n.hostname=t,n.port="");break;case"protocol":n.protocol=t.toLowerCase(),n.slashes=!r;break;case"pathname":case"hash":if(t){var o=e==="pathname"?"/":"#";n[e]=t.charAt(0)!==o?o+t:t}else n[e]=t;break;case"username":case"password":n[e]=encodeURIComponent(t);break;case"auth":var i=t.indexOf(":");~i?(n.username=t.slice(0,i),n.username=encodeURIComponent(decodeURIComponent(n.username)),n.password=t.slice(i+1),n.password=encodeURIComponent(decodeURIComponent(n.password))):n.username=encodeURIComponent(decodeURIComponent(t))}for(var s=0;s<Ho.length;s++){var a=Ho[s];a[4]&&(n[a[1]]=n[a[1]].toLowerCase())}return n.auth=n.password?n.username+":"+n.password:n.username,n.origin=n.protocol!=="file:"&&ne(n.protocol)&&n.host?n.protocol+"//"+n.host:"null",n.href=n.toString(),n}function t0(e){(!e||typeof e!="function")&&(e=kr.stringify);var t,r=this,n=r.host,o=r.protocol;o&&o.charAt(o.length-1)!==":"&&(o+=":");var i=o+(r.protocol&&r.slashes||ne(r.protocol)?"//":"");return r.username?(i+=r.username,r.password&&(i+=":"+r.password),i+="@"):r.password?(i+=":"+r.password,i+="@"):r.protocol!=="file:"&&ne(r.protocol)&&!n&&r.pathname!=="/"&&(i+="@"),(n[n.length-1]===":"||Fl.test(r.hostname)&&!r.port)&&(n+=":"),i+=n+r.pathname,t=typeof r.query=="object"?e(r.query):r.query,t&&(i+=t.charAt(0)!=="?"?"?"+t:t),r.hash&&(i+=r.hash),i}oe.prototype={set:e0,toString:t0},oe.extractProtocol=Dl,oe.location=jl,oe.trimLeft=Vo,oe.qs=kr;var r0=oe;const n0=zo(r0);class o0{constructor(t,r){var n,o;this.contexts=t,this.eventMessage=r,this.isOpen=!1,this.target=document.createElement("div"),this.open=(i=100)=>{setTimeout(()=>{this.isOpen=!0,this.render()},i)},this.close=(i=100)=>{setTimeout(()=>{this.isOpen=!1,this.render()},i)},this.destroy=()=>{this.target.remove()},this.handleClick=i=>{this.isOpen&&(o_(this.eventMessage,i),this.contexts.action.type===U.openChatbot?window.open(We(this.contexts.action.contexts,{smartHello:i.smartHello})):this.contexts.action.type===U.openUrl?this.contexts.action.newTab?window.open(this.contexts.action.url):location.href=this.contexts.action.url:this.contexts.action.type===U.popupChatbot?(this.popupChatbot||(this.popupChatbot=new wr(this.contexts.action.contexts,this.eventMessage,()=>{this.open()},{smartHello:i.smartHello,autoFocus:!0})),this.popupChatbot.open(),this.close()):this.contexts.action.type===U.none&&this.close())},this.handleClickRemoveButton=()=>{qa(this.eventMessage),this.close()},this.handleChangeState=i=>{i==="open-balloon"?r_(this.eventMessage):i==="close-balloon"&&n_(this.eventMessage)},this.handleAiTriggerFired=()=>{Wa(this.eventMessage)},this.target.className=`krkr-${(n=this.eventMessage)==null?void 0:n.serviceId}-${(o=this.eventMessage)==null?void 0:o.actionId}`,document.body.appendChild(this.target),this.render()}render(){var t,r,n,o;hr(m(y1,{open:this.isOpen,layout:this.contexts.layout,color:this.contexts.color,icon:this.contexts.icon,iconWidth:this.contexts.iconWidth,iconOriginalWidth:this.contexts.iconOriginalWidth,iconDraggable:this.contexts.iconDraggable,iconAltImage:this.contexts.iconAltImage,balloonType:this.contexts.balloonType,balloonMessages:this.contexts.balloonMessages,balloonAlways:this.contexts.balloonAlways,balloonMessageIntervalSecond:this.contexts.balloonMessageIntervalSecond,balloonTimerTrigger:this.contexts.balloonTimerTrigger,balloonTimerTriggerWaitSecond:this.contexts.balloonTimerTriggerWaitSecond,balloonAiTrigger:this.contexts.balloonAiTrigger,balloonAiTriggerThreshold:this.contexts.balloonAiTriggerThreshold,balloonHideMobile:this.contexts.balloonHideMobile,balloonThemedBackground:this.contexts.balloonThemedBackground,closeButtonEnabled:(r=(t=this.contexts)==null?void 0:t.closeButton)==null?void 0:r.enabled,closeButtonType:(o=(n=this.contexts)==null?void 0:n.closeButton)==null?void 0:o.type,onClick:this.handleClick,onClickRemoveButton:this.handleClickRemoveButton,onChangeState:this.handleChangeState,onAiTriggerFired:this.handleAiTriggerFired,endpoint:re.VAR_ORIGIN,usePopularCardV2:this.contexts.usePopularCardV2}),this.target)}}class ft{constructor(t,r){this.action=t,this.eventMessage=r,c_(r)}create(){this.log("Load action."),this.executeCustomJs(),this.executeCustomCss()}destroy(){this.log("Destroy action.")}log(t){var r,n,o,i;$c("[KARAKURI ACTION] "+t+`
`,"  actionType :"+this.action.type+`
`,"  actionId   :"+((n=(r=this.eventMessage)==null?void 0:r.actionId)!=null?n:"(none. maybe preview mode.)")+`
`,"  serviceId  :"+((i=(o=this.eventMessage)==null?void 0:o.serviceId)!=null?i:"(none. maybe preview mode.)"))}executeCustomJs(){if(this.action.customJs){const t=document.createElement("script");t.textContent=this.action.customJs,document.body.appendChild(t)}}executeCustomCss(){if(this.action.customCss){const t=document.createElement("style");t.textContent=this.action.customCss,document.body.appendChild(t)}}resolveString(t,r){return typeof t=="string"?t:typeof t=="number"?`${t}`:r}resolveBoolean(t,r){return typeof t=="string"?t==="true":typeof t=="number"?t===1:typeof t=="boolean"?t:r}resolveInt(t,r){if(typeof t=="string"){const n=parseInt(t);if(!Number.isNaN(n))return n}return typeof t=="number"?t:r}resolveFloat(t,r){if(typeof t=="string"){const n=parseFloat(t);if(!Number.isNaN(n))return n}return typeof t=="number"?t:r}}class i0 extends ft{create(){var t,r,n,o,i,s;super.create(),((r=(t=this.action)==null?void 0:t.contexts)==null?void 0:r.type)===De.popupV1&&(this.template=new Pl(this.resolvePopupV1Contexts((n=this.action)==null?void 0:n.contexts),this.eventMessage),this.template.open()),((i=(o=this.action)==null?void 0:o.contexts)==null?void 0:i.type)===De.popupV2&&(this.template=new o0(this.resolvePopupV2Contexts((s=this.action)==null?void 0:s.contexts),this.eventMessage),this.template.open())}destroy(){var t;super.destroy(),(t=this.template)==null||t.destroy()}resolvePopupV1Contexts(t){return{type:De.popupV1,layout:t.layout,color:this.resolveString(t.color),icon:this.resolveString(t.icon),iconWidth:this.resolveInt(t.iconWidth),iconOriginalWidth:this.resolveInt(t.iconOriginalWidth),iconDraggable:this.resolveBoolean(t.iconDraggable),balloonAiTrigger:!0,balloonAiTriggerThreshold:this.resolveFloat(t.balloonAiTriggerThreshold),closeButton:t.closeButton,action:t.action}}resolvePopupV2Contexts(t){var n,o;return{type:De.popupV2,layout:t.layout,color:this.resolveString(t.color),icon:this.resolveString(t.icon),iconWidth:this.resolveInt(t.iconWidth),iconOriginalWidth:this.resolveInt(t.iconOriginalWidth),iconDraggable:this.resolveBoolean(t.iconDraggable),iconAltImage:this.resolveBoolean(t.iconAltImage),balloonType:(n=t.balloonType)!=null?n:"none",balloonMessages:(o=t.balloonMessages)!=null?o:[],balloonMessageIntervalSecond:this.resolveInt(t.balloonMessageIntervalSecond),balloonAlways:t.balloonTrigger===_o.always,balloonTimerTrigger:t.balloonTrigger===_o.timer,balloonTimerTriggerWaitSecond:this.resolveInt(t.balloonTimerTriggerWaitSecond),balloonAiTrigger:!0,balloonAiTriggerThreshold:this.resolveFloat(t.balloonAiTriggerThreshold),balloonHideMobile:this.resolveBoolean(t.balloonHideMobile),balloonThemedBackground:this.resolveBoolean(t.balloonThemedBackground),closeButton:t.closeButton,action:t.action,usePopularCardV2:this.resolveBoolean(t.usePopularCardV2)}}}function s0(e){const t=setInterval(()=>{const r=document.getElementById("krkr-button-target");r&&(clearInterval(t),r.addEventListener("click",n=>{var s;const o=n.target,i=We((s=e.action)==null?void 0:s.contexts);o instanceof HTMLAnchorElement?(o.href=i,o.target="_blank"):o instanceof HTMLElement&&window.open(i)}))},300)}class a0 extends ft{create(){super.create(),s0(this.resolveIframeContexts(this.action.contexts))}destroy(){super.destroy()}resolveIframeContexts(t){return t}}const C0="";function c0(e){const t=setInterval(()=>{var n;const r=document.getElementById("krkr-iframe-target");if(r){clearInterval(t);const o=document.createElement("iframe");o.allow="geolocation; fullscreen",o.src=We((n=e.action)==null?void 0:n.contexts),o.className="krkr-iframe",r.appendChild(o)}},300)}class l0 extends ft{create(){super.create(),c0(this.resolveIframeContexts(this.action.contexts))}destroy(){super.destroy()}resolveIframeContexts(t){return t}}class Ul extends ft{}class u0{constructor(t,r){var n,o;this.contexts=t,this.eventMessage=r,this.isOpen=!1,this.element=document.createElement("div"),this.open=(i=100)=>{setTimeout(()=>{this.isOpen=!0,this.render()},i)},this.close=(i=100)=>{setTimeout(()=>{this.isOpen=!1,this.render()},i)},this.destroy=()=>{this.element.remove()},this.handleClickCloseButton=i=>{i.stopPropagation(),s_(this.eventMessage),this.close()},this.handleClickBackdrop=()=>{a_(this.eventMessage),this.close()},this.handleClick=()=>{var i,s,a,l;this.isOpen&&(i_(this.eventMessage),((i=this.contexts.action)==null?void 0:i.type)===U.openChatbot?window.open(We(this.contexts.action.contexts)):((s=this.contexts.action)==null?void 0:s.type)===U.openUrl?this.contexts.action.newTab?window.open(this.contexts.action.url):location.href=this.contexts.action.url:((a=this.contexts.action)==null?void 0:a.type)===U.popupChatbot?(this.popupChatbot||(this.popupChatbot=new wr(this.contexts.action.contexts,this.eventMessage)),this.popupChatbot.open(),this.close()):((l=this.contexts.action)==null?void 0:l.type)===U.none?this.close():this.close())},this.render=()=>{var i,s,a,l,f,p,c,d,g,u,v,w,b,y,S,x;hr(m(ge,{children:[this.contexts.type===lt.text&&m(Ky,{open:this.isOpen,layout:this.contexts.layout,text:this.contexts.text,closeButtonEnabled:(s=(i=this.contexts)==null?void 0:i.closeButton)==null?void 0:s.enabled,closeButtonType:(l=(a=this.contexts)==null?void 0:a.closeButton)==null?void 0:l.type,onClick:this.handleClick,onClickCloseButton:this.handleClickCloseButton,onClickBackdrop:this.handleClickBackdrop}),this.contexts.type===lt.image&&m(Gy,{open:this.isOpen,layout:this.contexts.layout,image:this.contexts.image,closeButtonEnabled:(p=(f=this.contexts)==null?void 0:f.closeButton)==null?void 0:p.enabled,closeButtonType:(d=(c=this.contexts)==null?void 0:c.closeButton)==null?void 0:d.type,onClick:this.handleClick,onClickCloseButton:this.handleClickCloseButton,onClickBackdrop:this.handleClickBackdrop}),this.contexts.type===lt.button&&m(Wy,{open:this.isOpen,layout:this.contexts.layout,titleText:this.contexts.titleText,contentText:this.contexts.contentText,actionButtonLabel:this.contexts.buttonLabel,closeButtonEnabled:(u=(g=this.contexts)==null?void 0:g.closeButton)==null?void 0:u.enabled,closeButtonType:(w=(v=this.contexts)==null?void 0:v.closeButton)==null?void 0:w.type,onClickActionButton:this.handleClick,onClickCloseButton:this.handleClickCloseButton,onClickBackdrop:this.handleClickBackdrop}),this.contexts.type===lt.html&&m(zy,{open:this.isOpen,layout:this.contexts.layout,html:this.contexts.html,closeButtonEnabled:(y=(b=this.contexts)==null?void 0:b.closeButton)==null?void 0:y.enabled,closeButtonType:(x=(S=this.contexts)==null?void 0:S.closeButton)==null?void 0:x.type,onClick:this.handleClick,onClickCloseButton:this.handleClickCloseButton,onClickBackdrop:this.handleClickBackdrop})]}),this.element)},this.element.className=`krkr-${(n=this.eventMessage)==null?void 0:n.serviceId}-${(o=this.eventMessage)==null?void 0:o.actionId}`,document.body.appendChild(this.element),this.render()}}class f0 extends ft{create(){super.create(),this.template=new u0(this.resolvePopupMessageContexts(this.action.contexts),this.eventMessage),this.template.open()}destroy(){var t;super.destroy(),(t=this.template)==null||t.destroy()}resolvePopupMessageContexts(t){return t}}function Vl(e,t){return e.type===je.chatbot?new i0(e,t):e.type===je.chatbotIframe?new l0(e,t):e.type===je.chatbotButton?new a0(e,t):e.type===je.popupMessage?new f0(e,t):e.type===je.none?new Ul(e,t):new Ul(e,t)}class p0{constructor(t,r){this.services=t,this.previewMode=r,this.serviceActions=[],this.started=!1,this.watchIntervalMs=500}start(){if(this.started)return;const{serviceHistories:t}=v0(location.href);t&&t.forEach(r=>{Ka(r.service,r.action)}),this.watch(),this.started=!0}async watch(){await this.check(),setTimeout(async()=>{await this.watch()},this.watchIntervalMs)}async check(){let t=!1;for(const r of this.services){const n=this.previewMode||R1(r.serviceDevice)&&El(r)&&jo(r.customEventTriggers)&&await L1(r.serviceAiTrigger),o=r.allowDuplicateExecution||!t,i=r.spaEnabled;n&&o&&(this.createActionIfNotExist(r),t=!0),!n&&i&&this.destroyActionIfExist(r)}}createActionIfNotExist(t){if(!this.serviceActions.find(n=>n.serviceId===t._id)){const n=d0(t,this.previewMode);n.create(),this.serviceActions.push({serviceId:t._id,action:n})}}destroyActionIfExist(t){const r=this.serviceActions.find(n=>n.serviceId===t._id);r&&(r.action.destroy(),this.serviceActions=this.serviceActions.filter(n=>n.serviceId!==t._id))}}function d0({_id:e,actions:t},r){const n=g_().find(s=>s.service===e);if(n){const s=t.find(a=>a._id===n.action);if(s)return Vl(s,r?void 0:{serviceId:e,actionId:s._id,newArrival:!1})}const o=h0(t.map(s=>s.ratio),r),i=t[o];return Ka(e,i._id),Vl(i,r?void 0:{serviceId:e,actionId:i._id,newArrival:!0})}function h0(e,t){if(t)return 0;const r=Math.random();let n=0,o=0;for(let i=0;i<e.length;i++)if(n=o,o+=e[i],n<r&&r<=o)return i;return 0}function v0(e){const{query:t}=new n0(e,!0),r=t.krkr,n=t["krkr-a"],o=t["krkr-s"];return{clientId:g0(r),sessionChunk:m0(o),serviceHistories:b0(n)}}function g0(e){let t;try{e&&(t=decodeURIComponent(e))}catch(r){}return t}function m0(e){let t;try{e&&(t=decodeURIComponent(e))}catch(r){}return t}function b0(e){let t;try{e&&(t=decodeURIComponent(e).split(".").filter(r=>!!r).map(r=>{const[n,o]=r.split("-");return{service:n,action:o}}))}catch(r){}return t}function _0({preview:e}){xe.get(`${re.VAR_ORIGIN}/api/action${e?`/preview/${e}`:""}`).then(t=>t.data).then(t=>{H1(()=>{new p0(t,!!e).start()})})}const Hl=Ga(),ql=l_();ql.preview||Qb(re.VAR_TRACKING_ID,re.VAR_TRACKING_SCRIPT_URL,Hl),py(re.VAR_ORIGIN,location.href,Hl),_0(ql),window.krkrTrack=e=>{dy(e)&&Cc.append(e)},window.krkrExternal=async e=>{V1(e)&&await Do.call(e)},window.addEventListener("message",function(t){try{const r=JSON.parse(t.data);r.type==="krkr-token-update"&&v_(r.token)}catch(r){}},!1)})();
